/* Aloro Dashboard Styles */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

body {
    font-family: 'Inter', sans-serif;
}

.sidebar-item {
    transition: all 0.15s;
}

.sidebar-item:hover {
    background: rgba(59, 130, 246, 0.08);
}

.sidebar-item.active {
    background: rgba(59, 130, 246, 0.1);
    border-right: 2px solid #3b82f6;
}

.fade-in {
    animation: fadeIn 0.25s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

.card-hover {
    transition: box-shadow 0.2s;
}

.card-hover:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.sidebar-collapsed #sidebar {
    width: 72px;
}

.sidebar-collapsed #sidebar .nav-text,
.sidebar-collapsed #sidebar .sidebar-section,
.sidebar-collapsed #sidebar .org-card {
    display: none;
}

.sidebar-collapsed #mainContent {
    margin-left: 72px;
}

.table-row:hover {
    background: #f8fafc;
}

.call-details {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
}

.call-details.expanded {
    max-height: 300px;
}

.tool-card {
    transition: all 0.15s;
}

.tool-card:hover {
    border-color: #93c5fd;
}

.tool-card.enabled {
    border-color: #3b82f6;
    background: #eff6ff;
}

.variable-row:hover {
    background: #f8fafc;
}

.config-section {
    border-left: 3px solid #e2e8f0;
    padding-left: 1rem;
}

.config-section.active {
    border-left-color: #3b82f6;
}

/* Expand icon rotation */
.expand-icon {
    transition: transform 0.2s ease;
}

.call-details.expanded .expand-icon,
tr.expanded .expand-icon {
    transform: rotate(90deg);
}

/* ============================================
   MOBILE RESPONSIVENESS
   ============================================ */

/* Mobile sidebar overlay */
.sidebar-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 40;
    opacity: 0;
    transition: opacity 0.3s;
}

.sidebar-overlay.active {
    display: block;
    opacity: 1;
}

/* Mobile-first: hide sidebar by default, show on desktop */
@media (max-width: 1023px) {
    /* Sidebar slides in from left on mobile */
    #sidebar {
        transform: translateX(-100%);
        z-index: 50;
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.15);
    }
    
    #sidebar.mobile-open {
        transform: translateX(0);
    }
    
    /* Main content full width on mobile */
    #mainContent {
        margin-left: 0 !important;
    }
    
    /* Header adjustments */
    .header-search {
        display: none;
    }
    
    .header-user-text {
        display: none;
    }
    
    .header-user-avatar {
        padding-left: 0;
        border-left: none;
    }
    
    /* Reduce padding on mobile */
    #mainContent {
        padding: 1rem;
    }
    
    /* KPI cards: 2 columns on tablet, 1 on very small */
    .kpi-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    @media (max-width: 480px) {
        .kpi-grid {
            grid-template-columns: 1fr;
        }
    }
    
    /* Table scroll wrapper */
    .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .table-responsive table {
        min-width: 700px;
    }
    
    /* Filter grids: stack on mobile */
    .filter-grid {
        grid-template-columns: 1fr;
    }
    
    /* Charts: full width */
    .chart-grid {
        grid-template-columns: 1fr;
    }
    
    /* Outcome cards: 2x2 on tablet, stack on mobile */
    .outcome-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    @media (max-width: 480px) {
        .outcome-grid {
            grid-template-columns: 1fr;
        }
    }
    
    /* Promise date timeline: scroll horizontally */
    .promise-timeline {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .promise-timeline-grid {
        min-width: 560px;
    }
    
    /* Modal: full screen on mobile */
    .modal-container {
        max-width: 100%;
        max-height: 100vh;
        border-radius: 0;
        margin: 0;
    }
    
    /* Assistant cards: 1 column on mobile */
    .assistant-grid {
        grid-template-columns: 1fr;
    }
    
    /* Web widget tabs: scrollable */
    .widget-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .widget-tabs button {
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    /* Form grids: single column */
    .form-grid-2 {
        grid-template-columns: 1fr;
    }
    
    /* Phone number types: stack */
    .number-types-grid {
        grid-template-columns: 1fr;
    }
    
    /* Webhook grid: single column */
    .webhook-grid {
        grid-template-columns: 1fr;
    }
    
    /* Test chat panel: full screen */
    #testChatPanel {
        max-width: 100%;
    }
    
    /* Variable rows: stack fields */
    .variable-row .grid-cols-5 {
        grid-template-columns: 1fr 1fr;
        gap: 0.5rem;
    }
    
    .variable-row .col-span-2 {
        grid-column: span 2;
    }
    
    /* Tool cards: single column */
    .tools-grid {
        grid-template-columns: 1fr;
    }
    
    /* Stats mini cards */
    .stats-grid-5 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .stats-grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    @media (max-width: 480px) {
        .stats-grid-5,
        .stats-grid-4 {
            grid-template-columns: 1fr 1fr;
        }
    }
    
    /* Page header: stack title and actions */
    .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .page-header-actions {
        width: 100%;
        flex-wrap: wrap;
    }
    
    /* Knowledge base cards */
    .kb-grid {
        grid-template-columns: 1fr;
    }
    
    /* WhatsApp senders/templates tables */
    .wa-table {
        min-width: 600px;
    }
    
    /* Custom dashboards grid */
    .dashboards-grid {
        grid-template-columns: 1fr;
    }
    
    /* Widget types info */
    .widget-types-grid {
        grid-template-columns: 1fr;
    }
}

/* Tablet breakpoint (768px - 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    /* KPI: 3 columns on tablet */
    .kpi-grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .kpi-grid > *:nth-child(4),
    .kpi-grid > *:nth-child(5) {
        grid-column: span 1;
    }
    
    /* Assistant cards: 2 columns */
    .assistant-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Knowledge base: 2 columns */
    .kb-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Webhook: single column */
    .webhook-grid {
        grid-template-columns: 1fr;
    }
    
    /* Tools: 2 columns */
    .tools-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Dashboards: 2 columns */
    .dashboards-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Desktop: sidebar visible by default */
@media (min-width: 1024px) {
    #sidebar {
        transform: translateX(0);
    }
    
    .sidebar-overlay {
        display: none !important;
    }
    
    /* KPI: 5 columns on desktop */
    .kpi-grid {
        grid-template-columns: repeat(5, 1fr);
    }
}

/* Smooth transitions for responsive changes */
#sidebar {
    transition: transform 0.3s ease, width 0.3s ease;
}

#mainContent {
    transition: margin-left 0.3s ease, padding 0.3s ease;
}

/* Mobile-specific tweaks */
@media (max-width: 640px) {
    /* Smaller font sizes */
    h1 {
        font-size: 1.125rem;
    }
    
    /* Tighter spacing */
    .page-section {
        margin-bottom: 1rem;
    }
    
    /* Card padding */
    .card-body {
        padding: 0.875rem;
    }
    
    /* Button sizing */
    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.75rem;
    }
    
    /* Select inputs */
    select, input[type="text"], input[type="number"] {
        font-size: 16px; /* Prevents iOS zoom on focus */
    }
    
    /* Modal steps: scrollable */
    .modal-steps {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .modal-steps button {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 0.5rem 0.75rem;
        font-size: 0.75rem;
    }
    
    /* Pre-chat form fields: stack */
    .form-field-grid {
        grid-template-columns: 1fr;
    }
    
    /* Embed code: smaller font */
    pre code {
        font-size: 0.625rem;
    }
    
    /* Sample payload: smaller */
    .payload-preview {
        max-height: 200px;
    }
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
    /* Larger touch targets */
    .sidebar-item {
        padding: 0.75rem 1rem;
    }
    
    button, 
    .btn,
    select {
        min-height: 44px;
    }
    
    /* Remove hover effects on touch */
    .card-hover:hover {
        box-shadow: none;
    }
    
    .table-row:hover {
        background: transparent;
    }
    
    /* Add active states instead */
    .card-hover:active {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .sidebar-item:active {
        background: rgba(59, 130, 246, 0.15);
    }
}

/* Landscape phone tweaks */
@media (max-width: 896px) and (orientation: landscape) {
    #sidebar {
        top: 0;
        height: 100vh;
    }
    
    header {
        position: relative;
    }
    
    #mainContent {
        margin-top: 0;
    }
}

/* Print styles */
@media print {
    #sidebar,
    header,
    .no-print {
        display: none !important;
    }
    
    #mainContent {
        margin-left: 0 !important;
        margin-top: 0 !important;
    }
}
