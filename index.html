<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aloro — Voice AI Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {50: '#f8fafc',100: '#f1f5f9',200: '#e2e8f0',300: '#cbd5e1',400: '#94a3b8',500: '#64748b',600: '#475569',700: '#334155',800: '#1e293b',900: '#0f172a'},
                        accent: {50: '#eff6ff',100: '#dbeafe',200: '#bfdbfe',300: '#93c5fd',400: '#60a5fa',500: '#3b82f6',600: '#2563eb',700: '#1d4ed8',800: '#1e40af',900: '#1e3a8a'}
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 min-h-screen">

<!-- Mobile sidebar overlay -->
<div id="sidebarOverlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

<header class="fixed top-0 left-0 right-0 h-14 bg-white border-b border-slate-200 z-50 flex items-center justify-between px-4 lg:px-5">
    <div class="flex items-center gap-3 lg:gap-4">
        <button id="toggleSidebar" class="text-slate-400 hover:text-slate-600 p-2 rounded-lg hover:bg-slate-100 transition" onclick="toggleSidebar()">
            <i class="fas fa-bars text-lg"></i>
        </button>
        <div class="flex items-center gap-2.5">
            <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-accent-700 rounded-lg flex items-center justify-center">
                <span class="text-white font-bold text-sm">A</span>
            </div>
            <span class="font-semibold text-slate-800">Aloro</span>
            <span class="hidden sm:inline text-xs text-slate-400 font-medium ml-1">Voice AI Platform</span>
        </div>
    </div>
    <div class="flex items-center gap-2 lg:gap-3">
        <div class="relative header-search hidden md:block">
            <input type="text" id="globalSearch" placeholder="Search..." class="bg-slate-100 rounded-lg pl-9 pr-4 py-2 text-sm w-48 lg:w-64 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:bg-white transition">
            <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"></i>
        </div>
        <button class="text-slate-400 hover:text-slate-600 relative p-2 rounded-lg hover:bg-slate-100 transition">
            <i class="fas fa-bell"></i>
            <span class="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"></span>
        </button>
        <div class="flex items-center gap-2 lg:gap-3 lg:pl-3 lg:border-l border-slate-200 header-user-avatar">
            <div class="hidden sm:block text-right header-user-text">
                <p class="text-sm font-medium text-slate-700">Alexandru Crudu</p>
                <p class="text-xs text-slate-400">Telerenta.ro</p>
            </div>
            <div class="w-9 h-9 bg-accent-100 rounded-full flex items-center justify-center">
                <span class="text-accent-600 font-semibold text-sm">AC</span>
            </div>
        </div>
    </div>
</header>

<aside id="sidebar" class="fixed left-0 top-14 bottom-0 w-60 bg-white border-r border-slate-200 overflow-y-auto transition-all duration-300">
    <div class="p-3 border-b border-slate-100 org-card">
        <div class="bg-slate-50 rounded-lg p-3">
            <div class="flex items-center gap-2 mb-2">
                <div class="w-6 h-6 bg-accent-600 rounded flex items-center justify-center">
                    <span class="text-white text-xs font-semibold">T</span>
                </div>
                <span class="text-sm font-medium text-slate-700">Telerenta.ro</span>
                <i class="fas fa-chevron-down text-xs text-slate-400 ml-auto"></i>
            </div>
            <div class="flex items-center gap-2 text-xs text-slate-500">
                <span class="px-1.5 py-0.5 bg-green-100 text-green-700 rounded">Production</span>
                <span>3 assistants</span>
            </div>
        </div>
    </div>
    <nav class="p-2 overflow-y-auto flex-1">
        <!-- Analytics -->
        <div class="mb-3">
            <p class="px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Analytics</p>
            <div class="space-y-0.5">
                <a href="#" class="sidebar-item active flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="dashboard">
                    <i class="fas fa-th-large w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Dashboard</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="insights">
                    <i class="fas fa-chart-line w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Call Insights</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="custom-dashboards">
                    <i class="fas fa-layer-group w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Custom Dashboards</span>
                </a>
            </div>
        </div>

        <!-- Operations -->
        <div class="mb-3 border-t border-slate-100 pt-3">
            <p class="px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Operations</p>
            <div class="space-y-0.5">
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="calls">
                    <i class="fas fa-phone w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Calls</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="campaigns">
                    <i class="fas fa-bullhorn w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Campaigns</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="customers">
                    <i class="fas fa-users w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Customers</span>
                </a>
            </div>
        </div>

        <!-- AI Configuration -->
        <div class="mb-3 border-t border-slate-100 pt-3">
            <p class="px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">AI Configuration</p>
            <div class="space-y-0.5">
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="assistants">
                    <i class="fas fa-robot w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Assistants</span>
                    <span class="ml-auto bg-accent-100 text-accent-600 text-xs px-1.5 py-0.5 rounded">3</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="knowledge-bases">
                    <i class="fas fa-database w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Knowledge Bases</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="prompt-snippets">
                    <i class="fas fa-file-code w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Prompt Snippets</span>
                </a>
            </div>
        </div>

        <!-- Channels -->
        <div class="mb-3 border-t border-slate-100 pt-3">
            <p class="px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Channels</p>
            <div class="space-y-0.5">
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="conversations">
                    <i class="fas fa-comments w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Conversations</span>
                    <span class="ml-auto bg-amber-100 text-amber-600 text-xs px-1.5 py-0.5 rounded">Soon</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="web-widget">
                    <i class="fas fa-broadcast-tower w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Web Widget</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="phone-numbers">
                    <i class="fas fa-phone w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Phone Numbers</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="whatsapp-senders">
                    <i class="fab fa-whatsapp w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">WhatsApp</span>
                    <span class="ml-auto bg-amber-100 text-amber-600 text-xs px-1.5 py-0.5 rounded">Soon</span>
                </a>
            </div>
        </div>

        <!-- Integrations -->
        <div class="border-t border-slate-100 pt-3">
            <p class="px-3 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1">Integrations</p>
            <div class="space-y-0.5">
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" data-page="post-call-webhooks">
                    <i class="fas fa-plug w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Webhooks</span>
                </a>
                <a href="#" class="sidebar-item flex items-center gap-2.5 px-3 py-2 rounded-lg text-slate-700" onclick="window.open('https://docs.aloro.ai', '_blank')">
                    <i class="fas fa-book w-4 text-slate-400 text-sm"></i>
                    <span class="nav-text text-sm font-medium">Documentation</span>
                </a>
            </div>
        </div>
    </nav>
</aside>

<main id="mainContent" class="ml-0 lg:ml-60 mt-14 p-4 lg:p-6 transition-all duration-300">

    <!-- Dashboard Page -->
    <div id="page-dashboard" class="page fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Dashboard</h1>
                <p class="text-sm text-slate-500 mt-0.5">Telerenta.ro · Voice AI Operations</p>
            </div>
            <select class="bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-600">
                <option>Last 7 days</option>
                <option>Last 30 days</option>
                <option>This month</option>
            </select>
        </div>
        
        <!-- KPI Cards - 6 cards matching React -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3 lg:gap-4 mb-6">
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Total Calls</p>
                    <div class="w-8 h-8 bg-accent-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-phone text-accent-600 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">1,247</p>
                <p class="text-xs text-slate-400 mt-1"><span class="text-green-600">↑ 12.5%</span> vs last month</p>
            </div>
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Connected</p>
                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-phone-volume text-green-600 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">89.2%</p>
                <p class="text-xs text-slate-400 mt-1"><span class="text-green-600">↑ 2.3%</span> connection rate</p>
            </div>
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Resolutions</p>
                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-check-circle text-green-600 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">89</p>
                <p class="text-xs text-slate-400 mt-1">successful outcomes</p>
            </div>
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Pending Payments</p>
                    <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-clock text-amber-600 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">234</p>
                <p class="text-xs text-slate-400 mt-1">awaiting follow-up</p>
            </div>
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Human Escalations</p>
                    <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-user-plus text-red-500 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">18</p>
                <p class="text-xs text-amber-600 mt-1">2.0% needs follow-up</p>
            </div>
            <div class="card-hover bg-white rounded-lg p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-sm text-slate-500 font-medium">Talk Time</p>
                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-phone-slash text-purple-500 text-sm"></i>
                    </div>
                </div>
                <p class="text-2xl font-semibold text-slate-800">53.2h</p>
                <p class="text-xs text-slate-400 mt-1">This billing period</p>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
            <!-- Call Metrics Chart -->
            <div class="bg-white rounded-lg p-4 lg:p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-sm font-semibold text-slate-700">Call Metrics (Last 7 Days)</h2>
                </div>
                <!-- Toggle buttons -->
                <div class="flex flex-wrap gap-2 mb-4" id="chartToggles">
                    <button onclick="toggleChartLine('callVolume')" class="px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #3b82f6;" data-line="callVolume">Call Volume</button>
                    <button onclick="toggleChartLine('answered')" class="px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #10b981;" data-line="answered">Answered Calls</button>
                    <button onclick="toggleChartLine('talkTime')" class="px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-line="talkTime">Talk Time (min)</button>
                    <button onclick="toggleChartLine('outcomes')" class="px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-line="outcomes">Successful Outcomes</button>
                </div>
                <div class="h-64">
                    <canvas id="callMetricsChart"></canvas>
                </div>
            </div>

            <!-- Call Outcomes Breakdown -->
            <div class="bg-white rounded-lg p-4 lg:p-5 border border-slate-200">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-sm font-semibold text-slate-700">Call Outcomes Breakdown</h2>
                </div>
                <!-- Toggle buttons -->
                <div class="flex flex-wrap gap-2 mb-4" id="outcomeToggles">
                    <button onclick="toggleOutcomeLine('promiseToPay')" class="px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #10b981;" data-line="promiseToPay">Promise to Pay</button>
                    <button onclick="toggleOutcomeLine('humanEscalation')" class="px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #ef4444;" data-line="humanEscalation">Human Escalation</button>
                    <button onclick="toggleOutcomeLine('refused')" class="px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-line="refused">Refused/Dispute</button>
                    <button onclick="toggleOutcomeLine('noResolution')" class="px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-line="noResolution">No Resolution</button>
                </div>
                <div class="h-64">
                    <canvas id="callOutcomesChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Outcome Summary Cards -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6">
            <div class="flex items-center justify-between p-3 rounded-lg bg-green-50 border border-slate-100">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                    <span class="text-sm text-slate-700">Promise to Pay</span>
                </div>
                <span class="text-sm font-semibold text-slate-800">234</span>
            </div>
            <div class="flex items-center justify-between p-3 rounded-lg bg-red-50 border border-slate-100">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-red-500"></div>
                    <span class="text-sm text-slate-700">Escalate to Human</span>
                </div>
                <span class="text-sm font-semibold text-slate-800">18</span>
            </div>
            <div class="flex items-center justify-between p-3 rounded-lg bg-amber-50 border border-slate-100">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-amber-500"></div>
                    <span class="text-sm text-slate-700">Refused / Dispute</span>
                </div>
                <span class="text-sm font-semibold text-slate-800">45</span>
            </div>
            <div class="flex items-center justify-between p-3 rounded-lg bg-slate-50 border border-slate-100">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-slate-400"></div>
                    <span class="text-sm text-slate-700">No Resolution</span>
                </div>
                <span class="text-sm font-semibold text-slate-800">89</span>
            </div>
        </div>

        <!-- Recent Calls with Variables -->
        <div class="bg-white rounded-lg border border-slate-200">
            <div class="flex items-center justify-between p-4 border-b border-slate-100">
                <h2 class="text-sm font-semibold text-slate-700">Recent Calls</h2>
                <a href="#" onclick="$('.sidebar-item[data-page=calls]').click()" class="text-accent-600 font-medium hover:underline text-sm">View all →</a>
            </div>
            <div class="table-responsive">
                <table class="w-full">
                <thead>
                    <tr class="border-b border-slate-100 bg-slate-50/50">
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-8"></th>
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Phone</th>
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Assistant</th>
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Outcome</th>
                        <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Date</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="table-row border-b border-slate-50 cursor-pointer" onclick="toggleCallDetails(this)">
                        <td class="py-3 px-4"><i class="fas fa-chevron-right text-slate-300 text-xs expand-icon transition-transform duration-200"></i></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Completed</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 744 987 654</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded">Promise</span></td>
                        <td class="py-3 px-4 text-sm text-slate-500">Today, 11:15</td>
                    </tr>
                    <tr class="call-details bg-slate-50">
                        <td colspan="6" class="px-4 py-3">
                            <div class="text-xs text-slate-500 mb-2 font-medium">Extracted Variables:</div>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-green-50 border border-green-200 rounded text-xs"><span class="text-slate-400">promise_date:</span> <span class="font-medium text-green-700">Mar 5, 2026</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">amount:</span> <span class="font-medium text-slate-700">€245.00</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">payment_method:</span> <span class="font-medium text-slate-700">Card</span></span>
                            </div>
                        </td>
                    </tr>
                    <tr class="table-row border-b border-slate-50 cursor-pointer" onclick="toggleCallDetails(this)">
                        <td class="py-3 px-4"><i class="fas fa-chevron-right text-slate-300 text-xs expand-icon transition-transform duration-200"></i></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Completed</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 756 123 789</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-red-50 text-red-600 text-xs rounded">Escalate</span></td>
                        <td class="py-3 px-4 text-sm text-slate-500">Yesterday, 16:22</td>
                    </tr>
                    <tr class="call-details bg-slate-50">
                        <td colspan="6" class="px-4 py-3">
                            <div class="text-xs text-slate-500 mb-2 font-medium">Extracted Variables:</div>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-red-50 border border-red-200 rounded text-xs"><span class="text-red-600">escalation_reason:</span> <span class="font-medium text-red-700">Legal threat</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">amount:</span> <span class="font-medium text-slate-700">€1,250.00</span></span>
                                <span class="px-2 py-1 bg-amber-50 border border-amber-200 rounded text-xs"><span class="text-amber-600">priority:</span> <span class="font-medium text-amber-700">High</span></span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
    </div>

    <!-- Call Insights Page -->
    <div id="page-insights" class="page hidden fade-in">
        <div class="mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Call Insights</h1>
                <p class="text-sm text-slate-500 mt-0.5">Performance metrics and analytics</p>
            </div>
            <div class="flex items-center gap-3">
                <!-- Time Frame Selector -->
                <div class="flex items-center bg-white border border-slate-200 rounded-lg p-1" id="timeFrameSelector">
                    <button onclick="setTimeFrame('7d')" class="time-frame-btn px-3 py-1.5 text-xs font-medium rounded-md transition bg-accent-500 text-white" data-frame="7d">7d</button>
                    <button onclick="setTimeFrame('30d')" class="time-frame-btn px-3 py-1.5 text-xs font-medium rounded-md transition text-slate-600 hover:bg-slate-50" data-frame="30d">30d</button>
                    <button onclick="setTimeFrame('custom')" class="time-frame-btn px-3 py-1.5 text-xs font-medium rounded-md transition text-slate-600 hover:bg-slate-50" data-frame="custom">Custom</button>
                </div>
                <!-- Assistant Dropdown -->
                <div class="relative">
                    <button onclick="toggleInsightsDropdown()" class="flex items-center gap-2 px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 hover:bg-slate-50">
                        <i class="fas fa-calendar text-slate-400"></i>
                        <span id="insightsAssistantLabel">All Assistants</span>
                        <i class="fas fa-chevron-down text-slate-400"></i>
                    </button>
                    <div id="insightsDropdown" class="absolute right-0 mt-1 w-48 bg-white border border-slate-200 rounded-lg shadow-lg z-10 hidden">
                        <button onclick="selectInsightsAssistant('all', 'All Assistants')" class="w-full text-left px-3 py-2 text-sm text-accent-600 bg-accent-50">All Assistants</button>
                        <button onclick="selectInsightsAssistant('debt', 'Debt Collection')" class="w-full text-left px-3 py-2 text-sm text-slate-700 hover:bg-slate-50">Debt Collection</button>
                        <button onclick="selectInsightsAssistant('sales', 'Sales Outreach')" class="w-full text-left px-3 py-2 text-sm text-slate-700 hover:bg-slate-50">Sales Outreach</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Summary -->
        <div class="grid grid-cols-2 md:grid-cols-5 gap-3 mb-6">
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 mb-1">Avg LLM TTFT</p>
                <div class="flex items-end justify-between">
                    <span class="text-lg font-semibold text-slate-800">0.76s</span>
                    <span class="text-xs font-medium text-green-600">-5%</span>
                </div>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 mb-1">Avg TTS TTFB</p>
                <div class="flex items-end justify-between">
                    <span class="text-lg font-semibold text-slate-800">0.27s</span>
                    <span class="text-xs font-medium text-green-600">-3%</span>
                </div>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 mb-1">Avg E2E Latency</p>
                <div class="flex items-end justify-between">
                    <span class="text-lg font-semibold text-slate-800">1.12s</span>
                    <span class="text-xs font-medium text-green-600">-8%</span>
                </div>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 mb-1">Avg Tokens/Call</p>
                <div class="flex items-end justify-between">
                    <span class="text-lg font-semibold text-slate-800">248</span>
                    <span class="text-xs font-medium text-red-500">+2%</span>
                </div>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 mb-1">Cache Hit Rate</p>
                <div class="flex items-end justify-between">
                    <span class="text-lg font-semibold text-slate-800">38%</span>
                    <span class="text-xs font-medium text-green-600">+12%</span>
                </div>
            </div>
        </div>

        <!-- Performance Metrics Chart -->
        <div class="bg-white rounded-lg p-4 lg:p-5 border border-slate-200 mb-6">
            <h2 class="text-sm font-semibold text-slate-700 mb-4">Performance Metrics Over Time</h2>
            <div class="flex flex-wrap gap-2 mb-4" id="metricsToggles">
                <button onclick="toggleInsightsMetric('llmTTFT')" class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #3b82f6;" data-metric="llmTTFT"><i class="fas fa-bolt text-xs"></i> Avg LLM TTFT</button>
                <button onclick="toggleInsightsMetric('ttsTTFB')" class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-metric="ttsTTFB"><i class="fas fa-clock text-xs"></i> Avg TTS TTFB</button>
                <button onclick="toggleInsightsMetric('e2eLatency')" class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full text-white transition" style="background-color: #8b5cf6;" data-metric="e2eLatency"><i class="fas fa-message text-xs"></i> Avg E2E Latency</button>
                <button onclick="toggleInsightsMetric('tokensPerCall')" class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-metric="tokensPerCall"><i class="fas fa-database text-xs"></i> Avg Tokens/Call</button>
                <button onclick="toggleInsightsMetric('cachedPercent')" class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-full border border-slate-200 text-slate-600 hover:bg-slate-50 transition" data-metric="cachedPercent"><i class="fas fa-percentage text-xs"></i> Cached Tokens %</button>
            </div>
            <div class="h-80"><canvas id="performanceMetricsChart"></canvas></div>
        </div>

        <!-- Detailed Metrics Table -->
        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="p-4 border-b border-slate-100"><h2 class="text-sm font-semibold text-slate-700">Detailed Metrics</h2></div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Date</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">LLM TTFT</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">TTS TTFB</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">E2E Latency</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Tokens/Call</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Cache %</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 19</td><td class="py-3 px-4 text-sm text-slate-600">0.82s</td><td class="py-3 px-4 text-sm text-slate-600">0.31s</td><td class="py-3 px-4 text-sm text-slate-600">1.22s</td><td class="py-3 px-4 text-sm text-slate-600">261</td><td class="py-3 px-4 text-sm font-medium text-slate-600">34%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 20</td><td class="py-3 px-4 text-sm text-slate-600">0.72s</td><td class="py-3 px-4 text-sm text-slate-600">0.26s</td><td class="py-3 px-4 text-sm text-slate-600">1.08s</td><td class="py-3 px-4 text-sm text-slate-600">248</td><td class="py-3 px-4 text-sm font-medium text-slate-600">39%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 21</td><td class="py-3 px-4 text-sm text-slate-600">0.68s</td><td class="py-3 px-4 text-sm text-slate-600">0.24s</td><td class="py-3 px-4 text-sm text-slate-600">1.0s</td><td class="py-3 px-4 text-sm text-slate-600">235</td><td class="py-3 px-4 text-sm font-medium text-green-600">44%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 22</td><td class="py-3 px-4 text-sm text-slate-600">0.88s</td><td class="py-3 px-4 text-sm text-slate-600">0.33s</td><td class="py-3 px-4 text-sm text-slate-600">1.28s</td><td class="py-3 px-4 text-sm text-slate-600">272</td><td class="py-3 px-4 text-sm font-medium text-slate-600">30%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 23</td><td class="py-3 px-4 text-sm text-slate-600">0.76s</td><td class="py-3 px-4 text-sm text-slate-600">0.28s</td><td class="py-3 px-4 text-sm text-slate-600">1.12s</td><td class="py-3 px-4 text-sm text-slate-600">250</td><td class="py-3 px-4 text-sm font-medium text-slate-600">37%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 24</td><td class="py-3 px-4 text-sm text-slate-600">0.71s</td><td class="py-3 px-4 text-sm text-slate-600">0.25s</td><td class="py-3 px-4 text-sm text-slate-600">1.02s</td><td class="py-3 px-4 text-sm text-slate-600">240</td><td class="py-3 px-4 text-sm font-medium text-green-600">41%</td></tr>
                        <tr class="border-t border-slate-50"><td class="py-3 px-4 text-sm text-slate-700">Feb 25</td><td class="py-3 px-4 text-sm text-slate-600">0.74s</td><td class="py-3 px-4 text-sm text-slate-600">0.26s</td><td class="py-3 px-4 text-sm text-slate-600">1.06s</td><td class="py-3 px-4 text-sm text-slate-600">245</td><td class="py-3 px-4 text-sm font-medium text-green-600">43%</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Assistants Page -->
        <div class="bg-white rounded-lg p-4 lg:p-5 border border-slate-200">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-sm font-semibold text-slate-700">Upcoming Promise Dates</h2>
                <span class="text-xs text-slate-500">Next 7 days</span>
            </div>
            <div class="promise-timeline">
                <div class="grid grid-cols-7 gap-2 promise-timeline-grid">
                <div class="text-center p-3 bg-slate-50 rounded-lg">
                    <p class="text-xs text-slate-400 mb-1">Mon 24</p>
                    <p class="text-lg font-semibold text-slate-800">12</p>
                    <p class="text-xs text-slate-500">€840</p>
                </div>
                <div class="text-center p-3 bg-accent-50 rounded-lg border-2 border-accent-200">
                    <p class="text-xs text-accent-600 mb-1">Tue 25</p>
                    <p class="text-lg font-semibold text-accent-700">28</p>
                    <p class="text-xs text-slate-500">€1,680</p>
                </div>
                <div class="text-center p-3 bg-slate-50 rounded-lg">
                    <p class="text-xs text-slate-400 mb-1">Wed 26</p>
                    <p class="text-lg font-semibold text-slate-800">15</p>
                    <p class="text-xs text-slate-500">€920</p>
                </div>
                <div class="text-center p-3 bg-slate-50 rounded-lg">
                    <p class="text-xs text-slate-400 mb-1">Thu 27</p>
                    <p class="text-lg font-semibold text-slate-800">19</p>
                    <p class="text-xs text-slate-500">€1,150</p>
                </div>
                <div class="text-center p-3 bg-green-50 rounded-lg border-2 border-green-200">
                    <p class="text-xs text-green-600 mb-1">Fri 28</p>
                    <p class="text-lg font-semibold text-green-700">45</p>
                    <p class="text-xs text-slate-500">€2,890</p>
                </div>
                <div class="text-center p-3 bg-slate-50/50 rounded-lg">
                    <p class="text-xs text-slate-400 mb-1">Sat 1</p>
                    <p class="text-lg font-semibold text-slate-400">8</p>
                    <p class="text-xs text-slate-400">€340</p>
                </div>
                <div class="text-center p-3 bg-slate-50/50 rounded-lg">
                    <p class="text-xs text-slate-400 mb-1">Sun 2</p>
                    <p class="text-lg font-semibold text-slate-400">3</p>
                    <p class="text-xs text-slate-400">€120</p>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Assistants Page -->
    <div id="page-assistants" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Assistants</h1>
                <p class="text-sm text-slate-500 mt-0.5">Configure and manage voice AI agents</p>
            </div>
            <button onclick="openAssistantModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>New Assistant
            </button>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 assistant-grid">
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-accent-500 to-accent-700 rounded-lg flex items-center justify-center">
                            <i class="fas fa-hand-holding-usd text-white"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Debt Collection</h3>
                    <p class="text-sm text-slate-500 mb-3">Outbound debt recovery</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-globe mr-1"></i>ro-RO</span>
                        <span><i class="fas fa-clock mr-1"></i>Bucharest</span>
                        <span><i class="fas fa-brain mr-1"></i>GPT-4o</span>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-3">
                        <span class="px-1.5 py-0.5 bg-blue-50 text-blue-600 text-xs rounded"><i class="fas fa-exchange-alt mr-1"></i>Transfer</span>
                        <span class="px-1.5 py-0.5 bg-red-50 text-red-600 text-xs rounded"><i class="fas fa-phone-slash mr-1"></i>Hangup</span>
                        <span class="px-1.5 py-0.5 bg-purple-50 text-purple-600 text-xs rounded"><i class="fas fa-calculator mr-1"></i>DTMF</span>
                    </div>
                    <div class="flex items-center gap-2 mb-3 text-xs">
                        <span class="px-1.5 py-0.5 bg-green-50 text-green-600 rounded"><i class="fas fa-database mr-1"></i>5 variables</span>
                        <span class="text-slate-400">234 promises</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">847 calls · Updated 2d ago</span>
                        <div class="flex items-center gap-3">
                            <button onclick="event.stopPropagation(); openTestChat('debt', 'Debt Collection')" class="text-green-600 text-xs font-medium hover:underline"><i class="fas fa-comment-alt mr-1"></i>Test Chat</button>
                            <button onclick="event.stopPropagation()" class="text-purple-600 text-xs font-medium hover:underline"><i class="fas fa-code mr-1"></i>Widget</button>
                            <button onclick="event.stopPropagation(); openAssistantModal('debt')" class="text-accent-600 text-xs font-medium hover:underline">Edit</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sales Outreach -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-green-700 rounded-lg flex items-center justify-center">
                            <i class="fas fa-bullhorn text-white"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Sales Outreach</h3>
                    <p class="text-sm text-slate-500 mb-3">Lead qualification</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-globe mr-1"></i>ro-RO</span>
                        <span><i class="fas fa-clock mr-1"></i>Bucharest</span>
                        <span><i class="fas fa-brain mr-1"></i>Claude 3.5</span>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-3">
                        <span class="px-1.5 py-0.5 bg-orange-50 text-orange-600 text-xs rounded"><i class="fas fa-calendar mr-1"></i>Cal.com</span>
                        <span class="px-1.5 py-0.5 bg-blue-50 text-blue-600 text-xs rounded"><i class="fas fa-exchange-alt mr-1"></i>Transfer</span>
                    </div>
                    <div class="flex items-center gap-2 mb-3 text-xs">
                        <span class="px-1.5 py-0.5 bg-green-50 text-green-600 rounded"><i class="fas fa-database mr-1"></i>3 variables</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">312 calls · Updated 1w ago</span>
                        <div class="flex items-center gap-3">
                            <button onclick="event.stopPropagation(); openTestChat('sales', 'Sales Outreach')" class="text-green-600 text-xs font-medium hover:underline"><i class="fas fa-comment-alt mr-1"></i>Test Chat</button>
                            <button onclick="event.stopPropagation()" class="text-purple-600 text-xs font-medium hover:underline"><i class="fas fa-code mr-1"></i>Widget</button>
                            <button onclick="event.stopPropagation(); openAssistantModal('sales')" class="text-accent-600 text-xs font-medium hover:underline">Edit</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create New -->
            <div onclick="openAssistantModal()" class="card-hover bg-white rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center hover:border-accent-300 cursor-pointer min-h-[200px]">
                <div class="text-center py-8">
                    <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-plus text-slate-400"></i>
                    </div>
                    <p class="text-sm font-medium text-slate-600">Create new assistant</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Call Logs Page -->
    <div id="page-calls" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Call Logs</h1>
                <p class="text-sm text-slate-500 mt-0.5">Complete call history with extracted data</p>
            </div>
            <button class="bg-white border border-slate-200 text-slate-600 px-3 py-2 rounded-lg text-sm font-medium hover:bg-slate-50">
                <i class="fas fa-download mr-2"></i>Export
            </button>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 mb-5 stats-grid-5">
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Total</p>
                <p class="text-xl font-semibold text-slate-800 mt-1">1,247</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Connected</p>
                <p class="text-xl font-semibold text-green-600 mt-1">892</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Promises</p>
                <p class="text-xl font-semibold text-amber-600 mt-1">234</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Escalations</p>
                <p class="text-xl font-semibold text-red-600 mt-1">18</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Avg Duration</p>
                <p class="text-xl font-semibold text-slate-800 mt-1">2:34</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="bg-white rounded-lg p-4 border border-slate-200 mb-5">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 filter-grid">
                <div>
                    <label class="block text-xs font-medium text-slate-500 mb-1">Phone</label>
                    <input type="text" placeholder="Search..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-500 mb-1">Assistant</label>
                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                        <option>All</option>
                        <option>Debt Collection</option>
                        <option>Sales Outreach</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-500 mb-1">Status</label>
                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                        <option>All</option>
                        <option>Completed</option>
                        <option>No Answer</option>
                        <option>Failed</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-500 mb-1">Outcome</label>
                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                        <option>All</option>
                        <option>Promise to Pay</option>
                        <option>Escalate</option>
                        <option>Refused</option>
                        <option>Call Back</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-medium text-slate-500 mb-1">Date</label>
                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                        <option>All time</option>
                        <option>Today</option>
                        <option>Yesterday</option>
                        <option>This week</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="table-responsive">
                <table class="w-full">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-8"></th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Phone</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Assistant</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Duration</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Outcome</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-t border-slate-50 cursor-pointer" onclick="toggleCallDetails(this)">
                            <td class="py-3 px-4"><i class="fas fa-chevron-right text-slate-300 text-xs expand-icon transition-transform duration-200"></i></td>
                            <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Completed</span></td>
                            <td class="py-3 px-4 text-sm text-slate-700">+40 744 987 654</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-700">4:32</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded">Promise</span></td>
                        <td class="py-3 px-4 text-sm text-slate-500">Today, 11:15</td>
                    </tr>
                    <tr class="call-details bg-slate-50">
                        <td colspan="7" class="px-4 py-3">
                            <div class="text-xs text-slate-500 mb-2 font-medium">Extracted Variables:</div>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-green-50 border border-green-200 rounded text-xs"><span class="text-green-600">promise_date:</span> <span class="font-medium text-green-700">Mar 5, 2026</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">amount:</span> <span class="font-medium text-slate-700">€245.00</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">reason:</span> <span class="font-medium text-slate-700">forgot_payment</span></span>
                            </div>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50 cursor-pointer" onclick="toggleCallDetails(this)">
                        <td class="py-3 px-4"><i class="fas fa-chevron-right text-slate-300 text-xs expand-icon transition-transform duration-200"></i></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Completed</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 756 123 789</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-700">3:15</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-red-50 text-red-600 text-xs rounded">Escalate</span></td>
                        <td class="py-3 px-4 text-sm text-slate-500">Yesterday, 16:22</td>
                    </tr>
                    <tr class="call-details bg-slate-50">
                        <td colspan="7" class="px-4 py-3">
                            <div class="text-xs text-slate-500 mb-2 font-medium">Extracted Variables:</div>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-red-50 border border-red-200 rounded text-xs"><span class="text-red-600">escalation_reason:</span> <span class="font-medium text-red-700">Legal threat</span></span>
                                <span class="px-2 py-1 bg-white border border-slate-200 rounded text-xs"><span class="text-slate-400">amount:</span> <span class="font-medium text-slate-700">€1,250.00</span></span>
                                <span class="px-2 py-1 bg-amber-50 border border-amber-200 rounded text-xs"><span class="text-amber-600">priority:</span> <span class="font-medium text-amber-700">High</span></span>
                            </div>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4"></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-red-50 text-red-600 text-xs font-medium rounded">No Answer</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 799 876 543</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-400">—</td>
                        <td class="py-3 px-4 text-sm text-slate-400">—</td>
                        <td class="py-3 px-4 text-sm text-slate-500">Feb 22, 14:30</td>
                    </tr>
                </tbody>
            </table>
            </div>
            <div class="px-4 py-3 border-t border-slate-100 bg-slate-50 flex items-center justify-between">
                <p class="text-sm text-slate-500">Showing 3 of 1,247 calls</p>
                <div class="flex items-center gap-1">
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded"><i class="fas fa-chevron-left"></i></button>
                    <button class="px-2.5 py-1 text-sm text-accent-600 bg-white rounded font-medium">1</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded">2</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded">3</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Campaigns Page -->
    <div id="page-campaigns" class="page hidden fade-in">
        <div class="mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Campaigns</h1>
                <p class="text-sm text-slate-500 mt-0.5">Outbound campaign management</p>
            </div>
            <button onclick="openCampaignModal()" class="flex items-center gap-2 px-4 py-2 bg-accent-500 hover:bg-accent-600 text-white rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus"></i>
                New Campaign
            </button>
        </div>

        <div class="space-y-4">
            <!-- Campaign 1: Q1 Debt Recovery -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden hover:shadow-md transition-shadow">
                <div class="p-4 lg:p-5 border-b border-slate-100">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-accent-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullhorn text-accent-600"></i>
                            </div>
                            <div>
                                <h3 class="text-base font-semibold text-slate-800">Q1 Debt Recovery</h3>
                                <p class="text-xs text-slate-500">Assistant: Debt Collection</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded">running</span>
                            <button class="text-slate-400 hover:text-slate-600 p-1.5 hover:bg-slate-100 rounded-lg transition">
                                <i class="fas fa-pause"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-4 lg:p-5">
                    <div class="mb-4">
                        <div class="flex items-center justify-between text-sm mb-1.5">
                            <span class="text-slate-600">Progress</span>
                            <span class="font-medium text-slate-700">847/1,250 calls (68%)</span>
                        </div>
                        <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-2.5 bg-accent-500 rounded-full" style="width: 68%"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-calendar text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Duration</p>
                                <p class="text-sm font-medium text-slate-700">Feb 1 - Feb 28</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-users text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Contacts</p>
                                <p class="text-sm font-medium text-slate-700">1,250</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-phone text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Calls Made</p>
                                <p class="text-sm font-medium text-slate-700">847</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Connected</p>
                                <p class="text-sm font-medium text-green-600">753</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-chart-line text-accent-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Success Rate</p>
                                <p class="text-sm font-medium text-accent-600">78%</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-user-plus text-amber-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Escalations</p>
                                <p class="text-sm font-medium text-amber-600">18</p>
                            </div>
                        </div>
                    </div>
                    <div class="pt-4 border-t border-slate-100">
                        <p class="text-xs font-medium text-slate-500 mb-2">Extracted Variables</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Promise Date</span>
                                <span class="font-semibold text-accent-600">234</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Payment Method</span>
                                <span class="font-semibold text-accent-600">189</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Amount Confirmed</span>
                                <span class="font-semibold text-accent-600">312</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campaign 2: Service Renewal -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden hover:shadow-md transition-shadow">
                <div class="p-4 lg:p-5 border-b border-slate-100">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-accent-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullhorn text-accent-600"></i>
                            </div>
                            <div>
                                <h3 class="text-base font-semibold text-slate-800">Service Renewal - February</h3>
                                <p class="text-xs text-slate-500">Assistant: Sales Outreach</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-medium rounded">paused</span>
                            <button class="text-slate-400 hover:text-slate-600 p-1.5 hover:bg-slate-100 rounded-lg transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-4 lg:p-5">
                    <div class="mb-4">
                        <div class="flex items-center justify-between text-sm mb-1.5">
                            <span class="text-slate-600">Progress</span>
                            <span class="font-medium text-slate-700">234/500 calls (47%)</span>
                        </div>
                        <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-2.5 bg-accent-500 rounded-full" style="width: 47%"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-calendar text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Duration</p>
                                <p class="text-sm font-medium text-slate-700">Feb 10 - Mar 10</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-users text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Contacts</p>
                                <p class="text-sm font-medium text-slate-700">500</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-phone text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Calls Made</p>
                                <p class="text-sm font-medium text-slate-700">234</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Connected</p>
                                <p class="text-sm font-medium text-green-600">198</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-chart-line text-accent-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Success Rate</p>
                                <p class="text-sm font-medium text-accent-600">45%</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-user-plus text-amber-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Escalations</p>
                                <p class="text-sm font-medium text-amber-600">12</p>
                            </div>
                        </div>
                    </div>
                    <div class="pt-4 border-t border-slate-100">
                        <p class="text-xs font-medium text-slate-500 mb-2">Extracted Variables</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Renewal Interest</span>
                                <span class="font-semibold text-accent-600">89</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Upgrade Request</span>
                                <span class="font-semibold text-accent-600">23</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Callback Scheduled</span>
                                <span class="font-semibold text-accent-600">45</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campaign 3: Payment Reminder -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden hover:shadow-md transition-shadow">
                <div class="p-4 lg:p-5 border-b border-slate-100">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-accent-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullhorn text-accent-600"></i>
                            </div>
                            <div>
                                <h3 class="text-base font-semibold text-slate-800">Payment Reminder - Week 8</h3>
                                <p class="text-xs text-slate-500">Assistant: Debt Collection</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-medium rounded">completed</span>
                            <button class="text-slate-400 hover:text-slate-600 p-1.5 hover:bg-slate-100 rounded-lg transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-4 lg:p-5">
                    <div class="mb-4">
                        <div class="flex items-center justify-between text-sm mb-1.5">
                            <span class="text-slate-600">Progress</span>
                            <span class="font-medium text-slate-700">320/320 calls (100%)</span>
                        </div>
                        <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-2.5 bg-green-500 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4 mb-4">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-calendar text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Duration</p>
                                <p class="text-sm font-medium text-slate-700">Feb 17 - Feb 23</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-users text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Contacts</p>
                                <p class="text-sm font-medium text-slate-700">320</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-phone text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Calls Made</p>
                                <p class="text-sm font-medium text-slate-700">320</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Connected</p>
                                <p class="text-sm font-medium text-green-600">285</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-chart-line text-accent-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Success Rate</p>
                                <p class="text-sm font-medium text-accent-600">82%</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-user-plus text-amber-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Escalations</p>
                                <p class="text-sm font-medium text-amber-600">7</p>
                            </div>
                        </div>
                    </div>
                    <div class="pt-4 border-t border-slate-100">
                        <p class="text-xs font-medium text-slate-500 mb-2">Extracted Variables</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Promise Date</span>
                                <span class="font-semibold text-accent-600">156</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Payment Method</span>
                                <span class="font-semibold text-accent-600">134</span>
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-slate-100 rounded-full text-xs">
                                <span class="text-slate-600">Dispute Filed</span>
                                <span class="font-semibold text-accent-600">8</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Campaign 4: Scheduled -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden hover:shadow-md transition-shadow">
                <div class="p-4 lg:p-5 border-b border-slate-100">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bullhorn text-slate-400"></i>
                            </div>
                            <div>
                                <h3 class="text-base font-semibold text-slate-800">New Customer Onboarding</h3>
                                <p class="text-xs text-slate-500">Assistant: Customer Support</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs font-medium rounded">scheduled</span>
                            <button class="text-slate-400 hover:text-slate-600 p-1.5 hover:bg-slate-100 rounded-lg transition">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="p-4 lg:p-5">
                    <div class="mb-4">
                        <div class="flex items-center justify-between text-sm mb-1.5">
                            <span class="text-slate-600">Progress</span>
                            <span class="font-medium text-slate-700">0/200 calls (0%)</span>
                        </div>
                        <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                            <div class="h-2.5 bg-slate-300 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-calendar text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Duration</p>
                                <p class="text-sm font-medium text-slate-700">Mar 1 - Mar 15</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-users text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Contacts</p>
                                <p class="text-sm font-medium text-slate-700">200</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-phone text-slate-400"></i>
                            <div>
                                <p class="text-xs text-slate-500">Calls Made</p>
                                <p class="text-sm font-medium text-slate-700">0</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Connected</p>
                                <p class="text-sm font-medium text-green-600">0</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-chart-line text-accent-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Success Rate</p>
                                <p class="text-sm font-medium text-accent-600">0%</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-user-plus text-amber-500"></i>
                            <div>
                                <p class="text-xs text-slate-500">Escalations</p>
                                <p class="text-sm font-medium text-amber-600">0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conversations Page -->
    <div id="page-conversations" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Conversations</h1>
                <p class="text-sm text-slate-500 mt-0.5">Text-based interactions from all channels</p>
            </div>
            <div class="flex items-center gap-2">
                <select class="bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-600">
                    <option>All Sources</option>
                    <option>Test Chat</option>
                    <option>Web Widget</option>
                    <option>WhatsApp</option>
                </select>
                <button class="bg-white border border-slate-200 text-slate-600 px-3 py-2 rounded-lg text-sm font-medium hover:bg-slate-50">
                    <i class="fas fa-download mr-2"></i>Export
                </button>
            </div>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-5 stats-grid-4">
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Total Conversations</p>
                <p class="text-xl font-semibold text-slate-800 mt-1">487</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Test Chat</p>
                <p class="text-xl font-semibold text-orange-600 mt-1">124</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Web Widget</p>
                <p class="text-xl font-semibold text-purple-600 mt-1">203</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">WhatsApp</p>
                <p class="text-xl font-semibold text-green-600 mt-1">160</p>
            </div>
        </div>

        <!-- Conversations List -->
        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="table-responsive">
                <table class="w-full wa-table">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Source</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Customer</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Assistant</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Messages</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Tokens</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Date</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-20"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-t border-slate-50 cursor-pointer">
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fab fa-whatsapp mr-1"></i>WhatsApp</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 722 123 456</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-700">12</td>
                        <td class="py-3 px-4 text-sm text-slate-500">1,234</td>
                        <td class="py-3 px-4 text-sm text-slate-500">Today, 14:22</td>
                        <td class="py-3 px-4"><button class="text-accent-600 text-sm hover:underline">View</button></td>
                    </tr>
                    <tr class="table-row border-t border-slate-50 cursor-pointer">
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs font-medium rounded"><i class="fas fa-code mr-1"></i>Web Widget</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">Visitor #4521</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Sales Outreach</td>
                        <td class="py-3 px-4 text-sm text-slate-700">8</td>
                        <td class="py-3 px-4 text-sm text-slate-500">892</td>
                        <td class="py-3 px-4 text-sm text-slate-500">Today, 11:45</td>
                        <td class="py-3 px-4"><button class="text-accent-600 text-sm hover:underline">View</button></td>
                    </tr>
                    <tr class="table-row border-t border-slate-50 cursor-pointer">
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-orange-50 text-orange-700 text-xs font-medium rounded"><i class="fas fa-flask mr-1"></i>Test Chat</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">Internal Test</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-700">5</td>
                        <td class="py-3 px-4 text-sm text-slate-500">456</td>
                        <td class="py-3 px-4 text-sm text-slate-500">Yesterday, 16:30</td>
                        <td class="py-3 px-4"><button class="text-accent-600 text-sm hover:underline">View</button></td>
                    </tr>
                    <tr class="table-row border-t border-slate-50 cursor-pointer">
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fab fa-whatsapp mr-1"></i>WhatsApp</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">+40 733 987 654</td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4 text-sm text-slate-700">18</td>
                        <td class="py-3 px-4 text-sm text-slate-500">2,103</td>
                        <td class="py-3 px-4 text-sm text-slate-500">Feb 22, 09:15</td>
                        <td class="py-3 px-4"><button class="text-accent-600 text-sm hover:underline">View</button></td>
                    </tr>
                </tbody>
            </table>
            </div>
            <div class="px-4 py-3 border-t border-slate-100 bg-slate-50 flex items-center justify-between">
                <p class="text-sm text-slate-500">Showing 4 of 487 conversations</p>
                <div class="flex items-center gap-1">
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded"><i class="fas fa-chevron-left"></i></button>
                    <button class="px-2.5 py-1 text-sm text-accent-600 bg-white rounded font-medium">1</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded">2</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded">3</button>
                    <button class="px-2.5 py-1 text-sm text-slate-500 hover:bg-white rounded"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Knowledge Bases Page -->
    <div id="page-knowledge-bases" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Knowledge Bases</h1>
                <p class="text-sm text-slate-500 mt-0.5">Document and website indexing for AI reference</p>
            </div>
            <button onclick="openKBModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>New Knowledge Base
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 kb-grid">
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-book text-green-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Product Documentation</h3>
                    <p class="text-sm text-slate-500 mb-3">FAQs, policies, procedures</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-file-alt mr-1"></i>12 documents</span>
                        <span><i class="fas fa-link mr-1"></i>3 URLs</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Updated 2 days ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-slate-400 hover:text-slate-600"><i class="fas fa-edit text-sm"></i></button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Debt Collection Scripts KB -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-file-contract text-blue-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Debt Collection Scripts</h3>
                    <p class="text-sm text-slate-500 mb-3">Legal scripts and compliance docs</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-file-alt mr-1"></i>8 documents</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Updated 1 week ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-slate-400 hover:text-slate-600"><i class="fas fa-edit text-sm"></i></button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Processing KB -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-hourglass-half text-amber-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-amber-50 text-amber-700 text-xs font-medium rounded"><i class="fas fa-spinner fa-spin mr-1"></i>Processing</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">New Policy Updates</h3>
                    <p class="text-sm text-slate-500 mb-3">Recently uploaded policy documents</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-file-alt mr-1"></i>5 documents</span>
                        <span><i class="fas fa-spinner fa-spin mr-1"></i>Indexing...</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Started 5 min ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-slate-400 hover:text-slate-600"><i class="fas fa-edit text-sm"></i></button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Failed KB -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-red-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-red-50 text-red-700 text-xs font-medium rounded">Failed</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Legacy Docs</h3>
                    <p class="text-sm text-slate-500 mb-3">Old documentation archive</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-file-alt mr-1"></i>3 documents</span>
                        <span class="text-red-500"><i class="fas fa-times mr-1"></i>Parse error</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Failed 2 hours ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-accent-600 text-sm font-medium hover:underline">Retry</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create New -->
            <div onclick="openKBModal()" class="card-hover bg-white rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center hover:border-accent-300 cursor-pointer min-h-[180px]">
                <div class="text-center py-8">
                    <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-plus text-slate-400"></i>
                    </div>
                    <p class="text-sm font-medium text-slate-600">Create new knowledge base</p>
                </div>
            </div>
        </div>
    </div>

    <!-- WhatsApp Senders Page -->
    <div id="page-whatsapp-senders" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">WhatsApp Senders</h1>
                <p class="text-sm text-slate-500 mt-0.5">Manage WhatsApp Business phone numbers</p>
            </div>
            <button onclick="openWASenderModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>Add Sender
            </button>
        </div>

        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="table-responsive">
                <table class="w-full wa-table">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Number</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Display Name</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Type</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Quality</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Messages</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-24"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-t border-slate-50">
                            <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 751 234 567</td>
                        <td class="py-3 px-4 text-sm text-slate-700">Telerenta Support</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Platform</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fas fa-check-circle mr-1"></i>Online</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded">High</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">2,341</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 722 987 654</td>
                        <td class="py-3 px-4 text-sm text-slate-700">Telerenta Sales</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded">External</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fas fa-check-circle mr-1"></i>Online</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-amber-50 text-amber-700 text-xs rounded">Medium</span></td>
                        <td class="py-3 px-4 text-sm text-slate-700">876</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 733 111 222</td>
                        <td class="py-3 px-4 text-sm text-slate-700">New Business Line</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Platform</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-amber-50 text-amber-700 text-xs font-medium rounded"><i class="fas fa-clock mr-1"></i>Pending</span></td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded">New</span></td>
                        <td class="py-3 px-4 text-sm text-slate-400">—</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Verify</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>

        <!-- Status Legend -->
        <div class="mt-4 bg-slate-50 rounded-lg p-4">
            <p class="text-xs font-semibold text-slate-500 uppercase mb-2">Status Legend</p>
            <div class="flex flex-wrap gap-4 text-xs">
                <span><span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-1"></span>Online — Fully operational</span>
                <span><span class="inline-block w-2 h-2 bg-blue-500 rounded-full mr-1"></span>Connecting — Being initialized</span>
                <span><span class="inline-block w-2 h-2 bg-amber-500 rounded-full mr-1"></span>Pending — Awaiting verification</span>
                <span><span class="inline-block w-2 h-2 bg-slate-400 rounded-full mr-1"></span>Offline — Manually disabled</span>
                <span><span class="inline-block w-2 h-2 bg-red-500 rounded-full mr-1"></span>Suspended — Meta policy violation</span>
            </div>
        </div>
    </div>

    <!-- WhatsApp Templates Page -->
    <div id="page-whatsapp-templates" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">WhatsApp Templates</h1>
                <p class="text-sm text-slate-500 mt-0.5">Pre-approved message templates for business-initiated conversations</p>
            </div>
            <button onclick="openWATemplateModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>Create Template
            </button>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-5 stats-grid-4">
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Total Templates</p>
                <p class="text-xl font-semibold text-slate-800 mt-1">12</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Approved</p>
                <p class="text-xl font-semibold text-green-600 mt-1">8</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Pending Review</p>
                <p class="text-xl font-semibold text-amber-600 mt-1">3</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-slate-200">
                <p class="text-xs text-slate-500 font-medium">Rejected</p>
                <p class="text-xl font-semibold text-red-600 mt-1">1</p>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="table-responsive">
                <table class="w-full wa-table">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Template Name</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Category</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Language</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Sender</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-24"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-t border-slate-50">
                            <td class="py-3 px-4 text-sm text-slate-700 font-medium">payment_reminder</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Utility</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Romanian</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fas fa-check mr-1"></i>Approved</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">+40 751 234 567</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">View</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">promise_confirmation</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Utility</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Romanian</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fas fa-check mr-1"></i>Approved</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">+40 751 234 567</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">View</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">promotional_offer</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded">Marketing</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Romanian</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-amber-50 text-amber-700 text-xs font-medium rounded"><i class="fas fa-clock mr-1"></i>Pending</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">+40 722 987 654</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">View</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">otp_verification</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs rounded">Authentication</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Romanian</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded"><i class="fas fa-check mr-1"></i>Approved</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">+40 751 234 567</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">View</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">discount_alert</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded">Marketing</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Romanian</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-red-50 text-red-700 text-xs font-medium rounded"><i class="fas fa-times mr-1"></i>Rejected</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">+40 722 987 654</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">View</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
    </div>

    <!-- Web Widget Page -->
    <div id="page-web-widget" class="page hidden fade-in">
        <div class="mb-6">
            <h1 class="text-xl font-semibold text-slate-800">Voice Widget</h1>
            <p class="text-sm text-slate-500 mt-0.5">Configure and preview your embeddable voice AI widget</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Customization Panel -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4 border-b border-slate-100 flex items-center justify-between">
                    <h2 class="text-sm font-semibold text-slate-700 flex items-center gap-2">
                        <i class="fas fa-cog text-slate-400"></i>
                        Widget Configuration
                    </h2>
                    <button onclick="$('#widgetCustomizer').toggle()" class="text-xs text-accent-600 hover:underline" id="widgetCustomizerToggle">Hide</button>
                </div>

                <div id="widgetCustomizer" class="p-4 space-y-5">
                    <!-- Primary Color -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Primary Color</label>
                        <div class="flex gap-2 flex-wrap" id="colorPresets">
                            <button onclick="setWidgetColor('#3b82f6')" class="w-8 h-8 rounded-lg border-2 border-slate-800 scale-110 transition" style="background-color: #3b82f6" title="Blue" data-color="#3b82f6"></button>
                            <button onclick="setWidgetColor('#10b981')" class="w-8 h-8 rounded-lg border-2 border-transparent hover:scale-105 transition" style="background-color: #10b981" title="Green" data-color="#10b981"></button>
                            <button onclick="setWidgetColor('#8b5cf6')" class="w-8 h-8 rounded-lg border-2 border-transparent hover:scale-105 transition" style="background-color: #8b5cf6" title="Purple" data-color="#8b5cf6"></button>
                            <button onclick="setWidgetColor('#ef4444')" class="w-8 h-8 rounded-lg border-2 border-transparent hover:scale-105 transition" style="background-color: #ef4444" title="Red" data-color="#ef4444"></button>
                            <button onclick="setWidgetColor('#f59e0b')" class="w-8 h-8 rounded-lg border-2 border-transparent hover:scale-105 transition" style="background-color: #f59e0b" title="Orange" data-color="#f59e0b"></button>
                            <button onclick="setWidgetColor('#ec4899')" class="w-8 h-8 rounded-lg border-2 border-transparent hover:scale-105 transition" style="background-color: #ec4899" title="Pink" data-color="#ec4899"></button>
                            <input type="color" id="widgetColorPicker" value="#3b82f6" onchange="setWidgetColor(this.value)" class="w-8 h-8 rounded-lg cursor-pointer">
                        </div>
                    </div>

                    <!-- Position -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">Position</label>
                        <div class="flex gap-6">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="widgetPosition" value="bottom-right" checked onchange="setWidgetPosition(this.value)" class="w-4 h-4 text-accent-500">
                                <span class="text-sm text-slate-600">Bottom Right</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="widgetPosition" value="bottom-left" onchange="setWidgetPosition(this.value)" class="w-4 h-4 text-accent-500">
                                <span class="text-sm text-slate-600">Bottom Left</span>
                            </label>
                        </div>
                    </div>

                    <!-- Title -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Widget Title</label>
                        <input type="text" id="widgetTitle" value="Voice Assistant" oninput="updateWidgetConfig()" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-accent-500">
                    </div>

                    <!-- Greeting -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Greeting Message</label>
                        <textarea id="widgetGreeting" rows="2" oninput="updateWidgetConfig()" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-accent-500 resize-none">Hello! I'm your AI assistant. Click the call button to start a voice conversation.</textarea>
                    </div>

                    <!-- Show Transcript -->
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" id="widgetShowTranscript" checked onchange="updateWidgetConfig()" class="w-4 h-4 text-accent-500 rounded">
                        <span class="text-sm text-slate-700">Show live transcript</span>
                    </label>
                </div>
            </div>

            <!-- Embed Code -->
            <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4 border-b border-slate-100">
                    <h2 class="text-sm font-semibold text-slate-700">Embed Code</h2>
                </div>
                <div class="p-4">
                    <pre id="widgetEmbedCode" class="bg-slate-900 text-slate-100 p-4 rounded-lg text-xs overflow-x-auto font-mono whitespace-pre-wrap">&lt;script src="https://cdn.aloro.ai/widget.js"&gt;&lt;/script&gt;
&lt;script&gt;
  AloroVoice.init({
    orgId: 'your-org-id',
    assistantId: 'your-assistant-id',
    primaryColor: '#3b82f6',
    position: 'bottom-right',
    greeting: 'Hello! I\'m your AI assistant.',
    title: 'Voice Assistant',
    showTranscript: true
  });
&lt;/script&gt;</pre>
                    <button onclick="copyWidgetEmbedCode()" id="copyEmbedBtn" class="mt-3 w-full px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2">
                        <i class="fas fa-copy"></i>
                        <span>Copy to Clipboard</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Widget Preview Section -->
        <div class="bg-white rounded-lg border border-slate-200 p-4 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-sm font-semibold text-slate-700">Live Preview</h2>
                <button onclick="resetWidgetDemo()" class="text-xs text-accent-600 hover:underline">Reset Demo</button>
            </div>
            <p class="text-sm text-slate-500 mb-4">The widget preview appears in the bottom corner of your screen. Try interacting with it!</p>
        </div>
    </div>

    <!-- Live Widget Preview (Fixed Position) -->
    <div id="widgetPreview" class="fixed bottom-6 right-6 w-80 bg-white rounded-2xl shadow-2xl overflow-hidden z-50" style="max-width: calc(100vw - 3rem)">
        <!-- Header -->
        <div id="widgetHeader" class="px-4 py-3 flex items-center justify-between text-white" style="background-color: #3b82f6">
            <div class="flex items-center gap-2">
                <i class="fas fa-volume-up"></i>
                <span class="font-medium" id="widgetPreviewTitle">Voice Assistant</span>
            </div>
            <button onclick="closeWidgetPreview()" class="p-1 hover:bg-white/20 rounded transition">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Main Content -->
        <div class="p-4 bg-slate-50">
            <!-- Idle State -->
            <div id="widgetIdle" class="text-center">
                <div class="text-sm text-slate-500 mb-2">Ready to call</div>
                <button onclick="startWidgetCall()" id="widgetCallBtn" class="w-16 h-16 rounded-full text-white shadow-lg hover:scale-105 transition flex items-center justify-center mx-auto" style="background-color: #3b82f6">
                    <i class="fas fa-phone text-xl"></i>
                </button>
                <div class="text-xs text-slate-400 mt-2">Click to start voice call</div>
            </div>

            <!-- Connecting State -->
            <div id="widgetConnecting" class="text-center hidden">
                <div class="w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-2" style="background-color: rgba(59, 130, 246, 0.2)">
                    <div class="w-3 h-3 rounded-full animate-ping" style="background-color: #3b82f6"></div>
                </div>
                <div class="text-sm text-slate-600">Connecting...</div>
            </div>

            <!-- Connected State -->
            <div id="widgetConnected" class="text-center hidden">
                <!-- Audio Visualizer -->
                <div class="flex items-center justify-center gap-1 h-12 mb-2" id="audioVisualizer">
                    <!-- Bars generated by JS -->
                </div>
                <div class="text-lg font-mono text-slate-700 mb-1" id="callDuration">0:00</div>
                <div class="text-xs text-slate-500" id="callStatus">Listening...</div>

                <!-- Controls -->
                <div class="flex items-center justify-center gap-3 mt-3">
                    <button onclick="toggleWidgetMute()" id="widgetMuteBtn" class="w-12 h-12 rounded-full flex items-center justify-center transition bg-slate-200 text-slate-600">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button onclick="endWidgetCall()" class="w-14 h-14 rounded-full bg-red-500 text-white flex items-center justify-center hover:bg-red-600 transition">
                        <i class="fas fa-phone-slash text-lg"></i>
                    </button>
                </div>
            </div>

            <!-- Transcript -->
            <div id="widgetTranscript" class="border-t border-slate-200 pt-3 mt-3 hidden">
                <div class="text-xs font-medium text-slate-500 mb-2">Transcript</div>
                <div class="max-h-32 overflow-y-auto space-y-2" id="transcriptMessages">
                    <!-- Messages added by JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Widget Toggle Button (when closed) -->
    <button id="widgetToggleBtn" onclick="openWidgetPreview()" class="fixed bottom-6 right-6 w-14 h-14 rounded-full text-white shadow-lg hover:scale-105 transition z-50 hidden flex items-center justify-center" style="background-color: #3b82f6">
        <i class="fas fa-phone text-lg"></i>
    </button>

    <!-- Phone Numbers Page -->
                            <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                            <span class="text-sm text-slate-700">Show function calls in chat</span>
                        </label>
                        <p class="text-xs text-slate-400 ml-6 mt-1">Display tool/API calls made by the assistant</p>
                    </div>
                </div>
            </div>

            <!-- Voice Settings Tab -->
            <div id="widget-tab-voice" class="widget-tab-content p-6 hidden">
                <div class="grid grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Microphone Selection</label>
                        <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                            <option>Default System Microphone</option>
                            <option>Specific device...</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Voice Preferences</label>
                        <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                            <option>Same as Assistant</option>
                            <option>Custom voice...</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Pre-chat Form Tab -->
            <div id="widget-tab-form" class="widget-tab-content p-6 hidden">
                <div class="mb-4">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                        <span class="text-sm font-medium text-slate-700">Enable Pre-chat Form</span>
                    </label>
                    <p class="text-xs text-slate-400 ml-6 mt-1">Collect visitor information before starting conversation</p>
                </div>

                <div class="space-y-3">
                    <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200">
                        <div class="flex-1 grid grid-cols-3 gap-2">
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Field Name</label>
                                <input type="text" value="name" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Label</label>
                                <input type="text" value="Your Name" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Required</label>
                                <select class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                                    <option selected>Yes</option>
                                    <option>No</option>
                                </select>
                            </div>
                        </div>
                        <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200">
                        <div class="flex-1 grid grid-cols-3 gap-2">
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Field Name</label>
                                <input type="text" value="email" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Label</label>
                                <input type="text" value="Email Address" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-500 mb-1">Required</label>
                                <select class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                                    <option selected>Yes</option>
                                    <option>No</option>
                                </select>
                            </div>
                        </div>
                        <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                    </div>
                </div>
                <button class="mt-3 w-full py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-500 hover:border-accent-300 hover:text-accent-600">
                    <i class="fas fa-plus mr-2"></i>Add Field
                </button>
            </div>
        </div>

        <!-- Embed Code Preview -->
        <div class="mt-6 bg-white rounded-lg border border-slate-200 p-5">
            <h3 class="text-sm font-semibold text-slate-700 mb-3">Embed Code</h3>
            <pre class="bg-slate-900 text-green-400 p-4 rounded-lg text-sm overflow-x-auto"><code>&lt;script src="https://widget.aloro.ai/v1.js" data-assistant-id="asst_abc123"&gt;&lt;/script&gt;</code></pre>
            <button class="mt-3 text-accent-600 text-sm font-medium hover:underline">
                <i class="fas fa-copy mr-1"></i>Copy to clipboard
            </button>
        </div>
    </div>

    <!-- Phone Numbers Page -->
    <div id="page-phone-numbers" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Phone Numbers</h1>
                <p class="text-sm text-slate-500 mt-0.5">Manage dedicated, SIP, and caller ID numbers</p>
            </div>
            <button onclick="openPhoneModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>Add Number
            </button>
        </div>

        <!-- Number Types Info -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                <div class="flex items-center gap-2 mb-2">
                    <i class="fas fa-phone text-blue-600"></i>
                    <span class="text-sm font-semibold text-blue-800">Dedicated Numbers</span>
                </div>
                <p class="text-xs text-blue-700">Full inbound + outbound. From $3.99/mo</p>
            </div>
            <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                <div class="flex items-center gap-2 mb-2">
                    <i class="fas fa-network-wired text-purple-600"></i>
                    <span class="text-sm font-semibold text-purple-800">SIP Integration</span>
                </div>
                <p class="text-xs text-purple-700">Use your PBX/VOIP. $0.00045/min AI bridging</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-4 border border-amber-200">
                <div class="flex items-center gap-2 mb-2">
                    <i class="fas fa-id-card text-amber-600"></i>
                    <span class="text-sm font-semibold text-amber-800">Caller ID</span>
                </div>
                <p class="text-xs text-amber-700">Outbound only with your existing number</p>
            </div>
        </div>

        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="table-responsive">
                <table class="w-full wa-table">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Number</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Type</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Assigned To</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Status</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">Monthly Cost</th>
                            <th class="text-left py-2.5 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-24"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-row border-t border-slate-50">
                            <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 751 234 567</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Dedicated</span></td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">$3.99</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 752 987 654</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-blue-50 text-blue-700 text-xs rounded">Dedicated</span></td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Sales Outreach</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">$3.99</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">sip://pbx.telerenta.ro</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-purple-50 text-purple-700 text-xs rounded">SIP</span></td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Debt Collection</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Connected</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Usage-based</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                    <tr class="table-row border-t border-slate-50">
                        <td class="py-3 px-4 text-sm text-slate-700 font-medium">+40 722 111 222</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-amber-50 text-amber-700 text-xs rounded">Caller ID</span></td>
                        <td class="py-3 px-4 text-sm text-accent-600 font-medium">Sales Outreach</td>
                        <td class="py-3 px-4"><span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Verified</span></td>
                        <td class="py-3 px-4 text-sm text-slate-600">Usage-based</td>
                        <td class="py-3 px-4">
                            <button class="text-accent-600 text-sm hover:underline mr-2">Edit</button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
        </div>
    </div>

    <!-- Customers Page -->
    <div id="page-customers" class="page hidden fade-in">
        <div class="mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Customers</h1>
                <p class="text-sm text-slate-500 mt-0.5" id="customersCount">15 customers in database</p>
            </div>
            <div class="flex items-center gap-2">
                <button class="flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 rounded-lg text-sm font-medium transition">
                    <i class="fas fa-upload"></i>
                    Import CSV
                </button>
                <button onclick="exportCustomers()" class="flex items-center gap-2 px-4 py-2 bg-accent-500 hover:bg-accent-600 text-white rounded-lg text-sm font-medium transition">
                    <i class="fas fa-download"></i>
                    Export CSV
                </button>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="mb-4">
            <div class="relative">
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="customerSearch" placeholder="Search by name, phone, or email..." 
                    class="w-full bg-white border border-slate-200 rounded-lg pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent-500"
                    oninput="filterCustomers()">
            </div>
        </div>

        <!-- Table -->
        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full" id="customersTable">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('name')">
                                <div class="flex items-center gap-1">Name <i class="fas fa-sort text-slate-300 sort-icon" data-col="name"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('phone')">
                                <div class="flex items-center gap-1">Phone <i class="fas fa-sort text-slate-300 sort-icon" data-col="phone"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('email')">
                                <div class="flex items-center gap-1">Email <i class="fas fa-sort text-slate-300 sort-icon" data-col="email"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('totalCalls')">
                                <div class="flex items-center gap-1">Total Calls <i class="fas fa-sort text-slate-300 sort-icon" data-col="totalCalls"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('answeredCalls')">
                                <div class="flex items-center gap-1">Answered <i class="fas fa-sort text-slate-300 sort-icon" data-col="answeredCalls"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('answerRate')">
                                <div class="flex items-center gap-1">Rate <i class="fas fa-sort text-slate-300 sort-icon" data-col="answerRate"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('avgDuration')">
                                <div class="flex items-center gap-1">Avg Duration <i class="fas fa-sort text-slate-300 sort-icon" data-col="avgDuration"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('lastContact')">
                                <div class="flex items-center gap-1">Last Contact <i class="fas fa-sort text-slate-300 sort-icon" data-col="lastContact"></i></div>
                            </th>
                            <th class="text-left py-3 px-4 text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100" onclick="sortCustomers('status')">
                                <div class="flex items-center gap-1">Status <i class="fas fa-sort text-slate-300 sort-icon" data-col="status"></i></div>
                            </th>
                            <th class="w-12"></th>
                        </tr>
                    </thead>
                    <tbody id="customersTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="flex items-center justify-between px-4 py-3 border-t border-slate-100" id="customersPagination">
                <p class="text-sm text-slate-500" id="customersPaginationInfo">Showing 1 to 10 of 15</p>
                <div class="flex items-center gap-1" id="customersPaginationButtons">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Snippets Page -->
    <div id="page-prompt-snippets" class="page hidden fade-in">
        <div class="mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Prompt Snippets</h1>
                <p class="text-sm text-slate-500 mt-0.5">Reusable text blocks for agent prompts</p>
            </div>
            <button onclick="openSnippetModal()" class="flex items-center gap-2 px-4 py-2 bg-accent-500 hover:bg-accent-600 text-white rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus"></i>
                New Snippet
            </button>
        </div>

        <!-- Filters -->
        <div class="mb-4 flex flex-col sm:flex-row gap-3">
            <div class="relative flex-1">
                <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="snippetSearch" placeholder="Search snippets..." 
                    class="w-full bg-white border border-slate-200 rounded-lg pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-accent-500"
                    oninput="filterSnippets()">
            </div>
            <div class="relative">
                <button onclick="toggleSnippetCategoryDropdown()" class="flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 hover:bg-slate-50 min-w-[140px]">
                    <span id="snippetCategoryLabel">All Categories</span>
                    <i class="fas fa-chevron-down text-slate-400 ml-auto"></i>
                </button>
                <div id="snippetCategoryDropdown" class="absolute right-0 mt-1 w-40 bg-white border border-slate-200 rounded-lg shadow-lg z-10 hidden">
                    <button onclick="filterSnippetsByCategory('all')" class="w-full text-left px-3 py-2 text-sm hover:bg-slate-50">All Categories</button>
                    <button onclick="filterSnippetsByCategory('company')" class="w-full text-left px-3 py-2 text-sm hover:bg-slate-50">Company</button>
                    <button onclick="filterSnippetsByCategory('legal')" class="w-full text-left px-3 py-2 text-sm hover:bg-slate-50">Legal</button>
                    <button onclick="filterSnippetsByCategory('instructions')" class="w-full text-left px-3 py-2 text-sm hover:bg-slate-50">Instructions</button>
                    <button onclick="filterSnippetsByCategory('custom')" class="w-full text-left px-3 py-2 text-sm hover:bg-slate-50">Custom</button>
                </div>
            </div>
        </div>

        <!-- Snippets List -->
        <div class="bg-white rounded-lg border border-slate-200 overflow-hidden" id="snippetsList">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Snippet Modal -->
    <div id="snippetModal" class="fixed inset-0 bg-black/50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col">
                <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                    <h2 class="text-lg font-semibold text-slate-800" id="snippetModalTitle">Create Snippet</h2>
                    <button onclick="$('#snippetModal').fadeOut()" class="text-slate-400 hover:text-slate-600 p-1">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-6 space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Snippet Name</label>
                        <div class="flex items-center gap-2">
                            <span class="text-slate-400 text-sm">{{</span>
                            <input type="text" id="snippetName" placeholder="snippet_name" 
                                class="flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-accent-500 font-mono">
                            <span class="text-slate-400 text-sm">}}</span>
                            <button onclick="copySnippetName()" class="p-2 text-slate-400 hover:text-accent-600 border border-slate-200 rounded-lg transition" title="Copy to clipboard">
                                <i class="fas fa-copy" id="snippetCopyIcon"></i>
                            </button>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">Use <code class="font-mono" id="snippetPreviewName">{{snippet_name}}</code> in your prompts</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Category</label>
                        <select id="snippetCategory" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-accent-500 bg-white">
                            <option value="company">Company</option>
                            <option value="legal">Legal</option>
                            <option value="instructions">Instructions</option>
                            <option value="custom">Custom</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Content</label>
                        <textarea id="snippetContent" rows="6" 
                            class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-accent-500 resize-y font-mono"
                            placeholder="Enter the snippet content..."></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Preview</label>
                        <div class="bg-slate-50 rounded-lg p-4 text-sm text-slate-600 border border-slate-200 min-h-[60px]" id="snippetContentPreview">
                            <span class="text-slate-400 italic">Content will appear here...</span>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200 bg-slate-50 rounded-b-xl">
                    <button onclick="$('#snippetModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition">Cancel</button>
                    <button onclick="saveSnippet()" class="px-4 py-2 bg-accent-500 hover:bg-accent-600 text-white rounded-lg text-sm font-medium transition" id="snippetSaveBtn">Create Snippet</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Post-Call Webhooks Page -->
    <div id="page-post-call-webhooks" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Post-Call Webhooks</h1>
                <p class="text-sm text-slate-500 mt-0.5">Configure webhooks to receive call data after completion</p>
            </div>
            <button onclick="openWebhookModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>Add Webhook
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Webhook List -->
            <div class="space-y-4">
                <!-- Webhook 1 -->
                <div class="bg-white rounded-lg border border-slate-200 p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <h3 class="text-sm font-semibold text-slate-800">CRM Integration</h3>
                            <p class="text-xs text-slate-500 mt-0.5">Update Hubspot with call outcomes</p>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <div class="bg-slate-50 rounded p-2 mb-3">
                        <code class="text-xs text-slate-600">https://api.hubapi.com/webhooks/aloro</code>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-3 text-xs text-slate-500">
                        <span class="flex items-center gap-1"><i class="fas fa-check text-green-500"></i>Completed calls only</span>
                        <span class="flex items-center gap-1"><i class="fas fa-check text-green-500"></i>Include recording</span>
                    </div>
                    <div class="flex items-center justify-between pt-3 border-t border-slate-100">
                        <span class="text-xs text-slate-400">Last triggered: 2 hours ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-accent-600 text-sm font-medium hover:underline">Test</button>
                            <button class="text-slate-400 hover:text-slate-600"><i class="fas fa-edit text-sm"></i></button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Webhook 2 -->
                <div class="bg-white rounded-lg border border-slate-200 p-5">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <h3 class="text-sm font-semibold text-slate-800">Slack Notifications</h3>
                            <p class="text-xs text-slate-500 mt-0.5">Post escalations to Slack channel</p>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <div class="bg-slate-50 rounded p-2 mb-3">
                        <code class="text-xs text-slate-600">https://hooks.slack.com/services/T00/B00/xxx</code>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-3 text-xs text-slate-500">
                        <span class="flex items-center gap-1"><i class="fas fa-times text-slate-400"></i>All calls</span>
                        <span class="flex items-center gap-1"><i class="fas fa-times text-slate-400"></i>No recording</span>
                    </div>
                    <div class="flex items-center justify-between pt-3 border-t border-slate-100">
                        <span class="text-xs text-slate-400">Last triggered: 30 min ago</span>
                        <div class="flex items-center gap-2">
                            <button class="text-accent-600 text-sm font-medium hover:underline">Test</button>
                            <button class="text-slate-400 hover:text-slate-600"><i class="fas fa-edit text-sm"></i></button>
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Create New -->
                <div onclick="openWebhookModal()" class="bg-white rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center hover:border-accent-300 cursor-pointer py-8">
                    <div class="text-center">
                        <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-plus text-slate-400"></i>
                        </div>
                        <p class="text-sm font-medium text-slate-600">Add new webhook</p>
                    </div>
                </div>
            </div>

            <!-- Webhook Payload Preview -->
            <div class="bg-white rounded-lg border border-slate-200 p-5">
                <h3 class="text-sm font-semibold text-slate-700 mb-3">Sample Payload</h3>
                <pre class="bg-slate-900 text-green-400 p-4 rounded-lg text-xs overflow-x-auto max-h-96"><code>{
  "call_id": "call_abc123",
  "phone": "+40 744 987 654",
  "assistant_id": "asst_xyz",
  "assistant_name": "Debt Collection",
  "status": "completed",
  "duration_seconds": 272,
  "started_at": "2026-02-24T11:15:00Z",
  "ended_at": "2026-02-24T11:19:32Z",
  "variables": {
    "call_outcome": "promise",
    "promise_date": "2026-03-05",
    "amount_discussed": 245.00,
    "escalation_reason": null
  },
  "transcript": "AI: Bună ziua...",
  "recording_url": "https://storage.aloro.ai/...",
  "campaign_id": "camp_123",
  "lead_id": "lead_456"
}</code></pre>
                <div class="mt-3 flex items-center gap-2">
                    <button class="text-accent-600 text-sm font-medium hover:underline">
                        <i class="fas fa-copy mr-1"></i>Copy JSON
                    </button>
                    <span class="text-slate-300">|</span>
                    <button class="text-accent-600 text-sm font-medium hover:underline">
                        <i class="fas fa-file-alt mr-1"></i>Full Documentation
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Dashboards Page -->
    <div id="page-custom-dashboards" class="page hidden fade-in">
        <div class="mb-6 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-semibold text-slate-800">Custom Dashboards</h1>
                <p class="text-sm text-slate-500 mt-0.5">Build custom analytics with drag-and-drop widgets</p>
            </div>
            <button onclick="openCustomDashboardModal()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">
                <i class="fas fa-plus mr-2"></i>Create Dashboard
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 dashboards-grid">
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-accent-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-tachometer-alt text-accent-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Executive Overview</h3>
                    <p class="text-sm text-slate-500 mb-3">High-level KPIs for leadership</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-chart-bar mr-1"></i>4 widgets</span>
                        <span><i class="fas fa-clock mr-1"></i>30-day range</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Last viewed: Today</span>
                        <button class="text-accent-600 text-sm font-medium hover:underline">Open</button>
                    </div>
                </div>
            </div>

            <!-- Debt Collection Performance Dashboard -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-hand-holding-usd text-green-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Debt Collection</h3>
                    <p class="text-sm text-slate-500 mb-3">Promise rates and recovery metrics</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-chart-bar mr-1"></i>6 widgets</span>
                        <span><i class="fas fa-clock mr-1"></i>7-day range</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Last viewed: Yesterday</span>
                        <button class="text-accent-600 text-sm font-medium hover:underline">Open</button>
                    </div>
                </div>
            </div>

            <!-- Sales Team Dashboard -->
            <div class="card-hover bg-white rounded-lg border border-slate-200 overflow-hidden">
                <div class="p-4">
                    <div class="flex items-start justify-between mb-3">
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-users text-purple-600"></i>
                        </div>
                        <span class="px-2 py-0.5 bg-green-50 text-green-700 text-xs font-medium rounded">Active</span>
                    </div>
                    <h3 class="text-base font-semibold text-slate-800 mb-1">Sales Team</h3>
                    <p class="text-sm text-slate-500 mb-3">Lead qualification and appointments</p>
                    <div class="flex flex-wrap gap-2 text-xs text-slate-500 mb-3">
                        <span><i class="fas fa-chart-bar mr-1"></i>5 widgets</span>
                        <span><i class="fas fa-clock mr-1"></i>14-day range</span>
                    </div>
                    <div class="pt-3 border-t border-slate-100 flex items-center justify-between">
                        <span class="text-xs text-slate-400">Last viewed: 2 days ago</span>
                        <button class="text-accent-600 text-sm font-medium hover:underline">Open</button>
                    </div>
                </div>
            </div>

            <!-- Create New -->
            <div onclick="openCustomDashboardModal()" class="card-hover bg-white rounded-lg border-2 border-dashed border-slate-200 flex items-center justify-center hover:border-accent-300 cursor-pointer min-h-[180px]">
                <div class="text-center py-8">
                    <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center mx-auto mb-2">
                        <i class="fas fa-plus text-slate-400"></i>
                    </div>
                    <p class="text-sm font-medium text-slate-600">Create new dashboard</p>
                </div>
            </div>
        </div>

        <!-- Widget Types Info -->
        <div class="mt-6 bg-slate-50 rounded-lg p-5">
            <h3 class="text-sm font-semibold text-slate-700 mb-4">Available Widget Types</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg p-4 border border-slate-200">
                    <div class="flex items-center gap-3 mb-2">
                        <div class="w-8 h-8 bg-blue-100 rounded flex items-center justify-center">
                            <i class="fas fa-hashtag text-blue-600 text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-slate-800">Stat Widgets</span>
                    </div>
                    <p class="text-xs text-slate-500">Single metrics with optional comparison and mini charts</p>
                </div>
                <div class="bg-white rounded-lg p-4 border border-slate-200">
                    <div class="flex items-center gap-3 mb-2">
                        <div class="w-8 h-8 bg-green-100 rounded flex items-center justify-center">
                            <i class="fas fa-chart-line text-green-600 text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-slate-800">Chart Widgets</span>
                    </div>
                    <p class="text-xs text-slate-500">8 chart types: line, bar, area, pie, donut, polar, radar, radial</p>
                </div>
                <div class="bg-white rounded-lg p-4 border border-slate-200">
                    <div class="flex items-center gap-3 mb-2">
                        <div class="w-8 h-8 bg-purple-100 rounded flex items-center justify-center">
                            <i class="fas fa-table text-purple-600 text-sm"></i>
                        </div>
                        <span class="text-sm font-semibold text-slate-800">Table Widgets</span>
                    </div>
                    <p class="text-xs text-slate-500">Detailed records with sorting, filtering, and pagination</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Chat Slide-over Panel -->
    <div id="testChatPanel" class="fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-xl z-50 transform translate-x-full transition-transform duration-300">
        <div class="h-full flex flex-col">
            <!-- Header -->
            <div class="flex items-center justify-between p-4 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Test Chat</h2>
                    <p class="text-sm text-slate-500">Debt Collection Agent</p>
                </div>
                <button onclick="closeTestChat()" class="text-slate-400 hover:text-slate-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div class="flex-1 overflow-y-auto p-4 space-y-4" id="testChatMessages">
                <!-- AI Message -->
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 bg-accent-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-accent-600 text-sm"></i>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-3 max-w-[80%]">
                        <p class="text-sm text-slate-700">Bună ziua! Vă contactăm din partea Telerenta cu privire la plata în întârziere pentru dispozitivul închiriat. Cu cine am onoarea să vorbesc?</p>
                    </div>
                </div>

                <!-- User Message -->
                <div class="flex items-start gap-3 justify-end">
                    <div class="bg-accent-500 rounded-lg p-3 max-w-[80%]">
                        <p class="text-sm text-white">Da, eu sunt. Scuze, am uitat să plătesc.</p>
                    </div>
                    <div class="w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user text-slate-500 text-sm"></i>
                    </div>
                </div>

                <!-- AI Message -->
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 bg-accent-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-accent-600 text-sm"></i>
                    </div>
                    <div class="bg-slate-100 rounded-lg p-3 max-w-[80%]">
                        <p class="text-sm text-slate-700">Nu face nimic, înțeleg perfect că se poate întâmpla. Suma datorată este de 245 EUR. Când credeți că ați putea efectua plata?</p>
                    </div>
                </div>

                <!-- Tool Call Indicator -->
                <div class="flex items-start gap-3">
                    <div class="w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-cog text-slate-400 text-sm"></i>
                    </div>
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 max-w-[80%]">
                        <p class="text-xs text-amber-700 font-medium"><i class="fas fa-tools mr-1"></i>Function Call: check_account_balance</p>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="p-4 border-t border-slate-200">
                <div class="flex items-center gap-2">
                    <input type="text" id="testChatInput" placeholder="Type your message..." class="flex-1 bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                    <button onclick="sendTestMessage()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="mt-3 flex items-center gap-2">
                    <button class="text-xs text-slate-500 hover:text-slate-700"><i class="fas fa-redo mr-1"></i>Reset</button>
                    <span class="text-slate-300">|</span>
                    <button class="text-xs text-slate-500 hover:text-slate-700"><i class="fas fa-download mr-1"></i>Export</button>
                </div>
            </div>
        </div>
    </div>
    <div id="testChatOverlay" class="fixed inset-0 bg-black/20 z-40 hidden" onclick="closeTestChat()"></div>

<div id="assistantModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-start lg:items-center justify-center min-h-screen p-2 lg:p-4">
        <div class="bg-white rounded-xl w-full max-w-5xl max-h-[100vh] lg:max-h-[90vh] overflow-hidden shadow-xl flex flex-col modal-container">
            <!-- Header -->
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800" id="modalTitle">Create Assistant</h2>
                    <p class="text-sm text-slate-500">Configure your voice AI agent</p>
                </div>
                <button onclick="$('#assistantModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>

            <!-- Steps -->
            <div class="flex border-b border-slate-200 px-3 lg:px-5 bg-slate-50 modal-steps overflow-x-auto">
                <button class="step-tab px-4 py-3 text-sm font-medium text-accent-600 border-b-2 border-accent-500" data-step="1">1. General</button>
                <button class="step-tab px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-700" data-step="2">2. Language & Model</button>
                <button class="step-tab px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-700" data-step="3">3. Voice</button>
                <button class="step-tab px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-700" data-step="4">4. Tools</button>
                <button class="step-tab px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-700" data-step="5">5. Variables</button>
                <button class="step-tab px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-700" data-step="6">6. Advanced</button>
            </div>

            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-6">
                
                <!-- Step 1: General -->
                <div id="step-1" class="step-content">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 form-grid-2">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Assistant Name *</label>
                            <input type="text" id="assistantName" placeholder="e.g., Debt Collection Agent" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Direction *</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option>Outbound only</option>
                                <option>Inbound only</option>
                                <option>Both directions</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Who Speaks First? *</label>
                            <select id="whoSpeaksFirst" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm" onchange="toggleInitialMessage()">
                                <option value="agent">Agent</option>
                                <option value="customer">Customer</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Phone Numbers</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option>+40 751 XXX XXX</option>
                                <option>+40 752 XXX XXX</option>
                                <option>+ New number...</option>
                            </select>
                        </div>
                    </div>
                    <div id="initialMessageField" class="mt-5">
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Initial Message</label>
                        <textarea id="initialMessage" rows="2" placeholder="Hello! This is a call from..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none"></textarea>
                        <p class="text-xs text-slate-400 mt-1">The message the agent will say when starting the call</p>
                    </div>
                    <div class="mt-5">
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Description</label>
                        <textarea rows="2" placeholder="Brief description of what this assistant does..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none"></textarea>
                    </div>
                </div>

                <!-- Step 2: Language & Model -->
                <div id="step-2" class="step-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 form-grid-2">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Primary Language *</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option value="ro-RO">Romanian (Romania)</option>
                                <option value="en-US">English (US)</option>
                                <option value="en-GB">English (UK)</option>
                                <option value="de-DE">German (Germany)</option>
                                <option value="fr-FR">French (France)</option>
                                <option value="es-ES">Spanish (Spain)</option>
                                <option value="it-IT">Italian (Italy)</option>
                                <option value="pl-PL">Polish (Poland)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Timezone *</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option value="Europe/Bucharest">Europe/Bucharest (UTC+2/+3)</option>
                                <option value="Europe/London">Europe/London (UTC+0/+1)</option>
                                <option value="Europe/Berlin">Europe/Berlin (UTC+1/+2)</option>
                                <option value="America/New_York">America/New York (UTC-5/-4)</option>
                                <option value="America/Los_Angeles">America/Los Angeles (UTC-8/-7)</option>
                            </select>
                        </div>
                    </div>

                    <div class="mt-6 pt-6 border-t border-slate-200">
                        <h3 class="text-sm font-semibold text-slate-700 mb-4">LLM Configuration</h3>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 form-grid-2">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1.5">Model *</label>
                                <select id="llmModel" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                    <optgroup label="OpenAI">
                                        <option value="gpt-4o">GPT-4o (Recommended)</option>
                                        <option value="gpt-4o-mini">GPT-4o Mini (Faster, cheaper)</option>
                                        <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                    </optgroup>
                                    <optgroup label="Anthropic">
                                        <option value="claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                                        <option value="claude-3-opus">Claude 3 Opus</option>
                                    </optgroup>
                                    <optgroup label="Google">
                                        <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                                        <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1.5">Temperature</label>
                                <div class="flex items-center gap-3">
                                    <input type="range" id="temperature" min="0" max="100" value="30" class="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer">
                                    <span id="tempValue" class="text-sm font-medium text-slate-700 w-10">0.3</span>
                                </div>
                                <p class="text-xs text-slate-400 mt-1">Lower = more deterministic, Higher = more creative</p>
                            </div>
                        </div>
                    </div>

                    <!-- Prompt Editor -->
                    <div class="mt-6 pt-6 border-t border-slate-200">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-sm font-semibold text-slate-700">AI Prompt</h3>
                            <div class="flex items-center gap-2">
                                <button type="button" onclick="insertPromptSnippet()" class="text-xs text-accent-600 hover:underline">
                                    <i class="fas fa-file-code mr-1"></i>Insert Snippet
                                </button>
                            </div>
                        </div>
                        <div class="border border-slate-200 rounded-lg overflow-hidden">
                            <div class="bg-slate-50 px-3 py-2 border-b border-slate-200 flex items-center gap-2">
                                <button type="button" onclick="formatPrompt('bold')" class="p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded" title="Bold"><i class="fas fa-bold text-xs"></i></button>
                                <button type="button" onclick="formatPrompt('italic')" class="p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded" title="Italic"><i class="fas fa-italic text-xs"></i></button>
                                <span class="text-slate-300">|</span>
                                <button type="button" onclick="formatPrompt('list')" class="p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded" title="List"><i class="fas fa-list text-xs"></i></button>
                                <button type="button" onclick="formatPrompt('link')" class="p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded" title="Variable"><i class="fas fa-code text-xs"></i></button>
                            </div>
                            <textarea id="promptEditor" rows="12" placeholder="You are a helpful voice AI assistant...

Instructions:
- Be polite and professional
- Collect customer information
- Handle objections gracefully

Available tools:
- transfer: Transfer to human agent
- hangup: End the call

Variables to extract:
{{customer_name}}
{{promise_date}}
{{amount}}" class="w-full px-4 py-3 text-sm font-mono focus:outline-none focus:ring-2 focus:ring-accent-500 resize-y" style="min-height: 200px;"></textarea>
                        </div>
                        <p class="text-xs text-slate-400 mt-2">Define the AI's personality, instructions, and behavior. Use <code class="bg-slate-100 px-1 rounded">{{variable}}</code> for dynamic values.</p>
                    </div>
                </div>

                <!-- Step 3: Voice -->
                <div id="step-3" class="step-content hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6 form-grid-2">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">TTS Provider *</label>
                            <select id="ttsProvider" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option value="cartesia">Cartesia Sonic</option>
                                <option value="minimax">Minimax</option>
                                <option value="elevenlabs">ElevenLabs</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1.5">Voice *</label>
                            <select id="voiceSelect" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <optgroup label="Male Voices">
                                    <option value="andrei">Andrei - Conversational, Romanian</option>
                                    <option value="mihai">Mihai - Professional, Romanian</option>
                                    <option value="alex">Alex - Friendly, Romanian</option>
                                </optgroup>
                                <optgroup label="Female Voices">
                                    <option value="elena">Elena - Conversational, Romanian</option>
                                    <option value="ioana">Ioana - Professional, Romanian</option>
                                    <option value="maria">Maria - Warm, Romanian</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="lg:col-span-2">
                            <button type="button" onclick="previewVoice()" class="flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm text-slate-700 transition">
                                <i class="fas fa-volume-up"></i>
                                Preview Voice
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Tools -->
                <div id="step-4" class="step-content hidden">
                    <p class="text-sm text-slate-500 mb-4">Enable tools that the assistant can use during calls. Each tool can be configured with specific rules.</p>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Cold Transfer -->
                        <div class="tool-card enabled p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-exchange-alt text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">Cold Transfer</h4>
                                        <p class="text-xs text-slate-500">Transfer call to human agent</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-accent-500 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute right-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-slate-100 space-y-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Transfer Number</label>
                                    <input type="text" value="+40 722 333 444" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">When to Transfer</label>
                                    <textarea rows="2" class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm resize-none">Transfer the call when the customer asks for a real assistant.</textarea>
                                </div>
                            </div>
                        </div>

                        <!-- End Call -->
                        <div class="tool-card enabled p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-phone-slash text-red-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">End Call</h4>
                                        <p class="text-xs text-slate-500">End call with rules</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-accent-500 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute right-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-slate-100 space-y-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">When to End</label>
                                    <textarea rows="2" placeholder="e.g., End the call when the customer says goodbye or hangs up." class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm resize-none"></textarea>
                                </div>
                                <div class="flex items-center gap-2">
                                    <input type="checkbox" checked class="rounded text-accent-500">
                                    <span class="text-xs text-slate-600">Max duration: <input type="number" value="600" class="w-16 bg-white border border-slate-200 rounded px-1 py-0.5 text-xs ml-1"> sec</span>
                                </div>
                            </div>
                        </div>

                        <!-- DTMF Input -->
                        <div class="tool-card p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calculator text-purple-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">DTMF Input</h4>
                                        <p class="text-xs text-slate-500">Collect keypad inputs</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-slate-200 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute left-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-slate-100">
                                <label class="block text-xs text-slate-500 mb-1">DTMF Prompt</label>
                                <textarea rows="2" placeholder="e.g., Please press 1 for sales, 2 for support." class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm resize-none"></textarea>
                            </div>
                        </div>

                        <!-- Appointment Scheduling -->
                        <div class="tool-card enabled p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calendar-plus text-orange-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">Appointment Scheduling</h4>
                                        <p class="text-xs text-slate-500">Book via Cal.com or Calendly</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-accent-500 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute right-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                            <div class="mt-3 pt-3 border-t border-slate-100 space-y-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Provider</label>
                                    <select class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option>Cal.com</option>
                                        <option>Calendly</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Event Type</label>
                                    <select class="w-full bg-white border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option>30 min consultation</option>
                                        <option>1 hour meeting</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- API / Webhook -->
                        <div class="tool-card p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-plug text-green-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">API / Webhook</h4>
                                        <p class="text-xs text-slate-500">Call external endpoints</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-slate-200 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute left-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Knowledge Base -->
                        <div class="tool-card p-4 rounded-lg border-2 border-slate-200 cursor-pointer" onclick="toggleTool(this)">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-database text-slate-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="text-sm font-semibold text-slate-800">Knowledge Base</h4>
                                        <p class="text-xs text-slate-500">RAG from documents</p>
                                    </div>
                                </div>
                                <div class="w-10 h-5 bg-slate-200 rounded-full relative">
                                    <div class="w-4 h-4 bg-white rounded-full absolute left-0.5 top-0.5 shadow"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Post-Call Variables -->
                <div id="step-5" class="step-content hidden">
                    <p class="text-sm text-slate-500 mb-4">Define structured data to extract from each call. These variables can be used in webhooks, analytics, and integrations.</p>
                    
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4">
                        <p class="text-xs text-amber-700"><i class="fas fa-info-circle mr-1"></i> Variables are extracted by the LLM at the end of each call based on the name, type, and description you provide.</p>
                    </div>

                    <!-- Variable List -->
                    <div class="space-y-2 mb-4" id="variablesList">
                        <div class="variable-row flex items-start gap-3 p-3 bg-white rounded-lg border border-slate-200">
                            <div class="flex-1 grid grid-cols-5 gap-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Name</label>
                                    <input type="text" value="call_outcome" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm font-mono">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Type</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option selected>enum</option>
                                        <option>string</option>
                                        <option>number</option>
                                        <option>boolean</option>
                                        <option>date</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Required</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option selected>Yes</option>
                                        <option>No</option>
                                    </select>
                                </div>
                                <div class="col-span-2">
                                    <label class="block text-xs text-slate-500 mb-1">Description / Enum Values</label>
                                    <input type="text" value="promise, refused, escalate, callback, no_answer" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-red-500 mt-5"><i class="fas fa-trash text-sm"></i></button>
                        </div>

                        <div class="variable-row flex items-start gap-3 p-3 bg-white rounded-lg border border-slate-200">
                            <div class="flex-1 grid grid-cols-5 gap-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Name</label>
                                    <input type="text" value="promise_date" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm font-mono">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Type</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option>enum</option>
                                        <option>string</option>
                                        <option>number</option>
                                        <option>boolean</option>
                                        <option selected>date</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Required</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option>No</option>
                                    </select>
                                </div>
                                <div class="col-span-2">
                                    <label class="block text-xs text-slate-500 mb-1">Description</label>
                                    <input type="text" value="Date customer promised to pay" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-red-500 mt-5"><i class="fas fa-trash text-sm"></i></button>
                        </div>

                        <div class="variable-row flex items-start gap-3 p-3 bg-white rounded-lg border border-slate-200">
                            <div class="flex-1 grid grid-cols-5 gap-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Name</label>
                                    <input type="text" value="amount_discussed" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm font-mono">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Type</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option>enum</option>
                                        <option>string</option>
                                        <option selected>number</option>
                                        <option>boolean</option>
                                        <option>date</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Required</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option selected>No</option>
                                    </select>
                                </div>
                                <div class="col-span-2">
                                    <label class="block text-xs text-slate-500 mb-1">Description</label>
                                    <input type="text" value="Amount discussed or promised (in EUR)" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-red-500 mt-5"><i class="fas fa-trash text-sm"></i></button>
                        </div>

                        <div class="variable-row flex items-start gap-3 p-3 bg-white rounded-lg border border-slate-200">
                            <div class="flex-1 grid grid-cols-5 gap-2">
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Name</label>
                                    <input type="text" value="escalation_reason" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm font-mono">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Type</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option selected>enum</option>
                                        <option>string</option>
                                        <option>number</option>
                                        <option>boolean</option>
                                        <option>date</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-500 mb-1">Required</label>
                                    <select class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                        <option selected>No</option>
                                    </select>
                                </div>
                                <div class="col-span-2">
                                    <label class="block text-xs text-slate-500 mb-1">Description / Enum Values</label>
                                    <input type="text" value="legal_threat, dispute, requested_supervisor, complex_case, other" class="w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                </div>
                            </div>
                            <button class="text-slate-400 hover:text-red-500 mt-5"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                    </div>

                    <button onclick="addVariable()" class="w-full py-2.5 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-500 hover:border-accent-300 hover:text-accent-600 transition">
                        <i class="fas fa-plus mr-2"></i>Add Variable
                    </button>
                </div>

                <!-- Step 6: Advanced -->
                <div id="step-6" class="step-content hidden">
                    <div class="space-y-6">
                        <!-- Post-Call Webhook -->
                        <div class="config-section">
                            <h3 class="text-sm font-semibold text-slate-700 mb-4">Post-Call Integration</h3>
                            <div>
                                <label class="block text-sm text-slate-600 mb-1.5">Webhook Integration</label>
                                <select id="postCallWebhook" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                    <option value="">None</option>
                                    <option value="webhook-1">CRM Sync - https://api.example.com/crm/webhook</option>
                                    <option value="webhook-2">Analytics - https://analytics.example.com/events</option>
                                    <option value="webhook-3">Slack Notification</option>
                                    <option value="new">+ Create new webhook...</option>
                                </select>
                                <p class="text-xs text-slate-400 mt-1">Send call data to external services after each call ends</p>
                            </div>
                        </div>

                        <!-- Re-engagement -->
                        <div class="config-section">
                            <h3 class="text-sm font-semibold text-slate-700 mb-4">Re-engagement</h3>
                            <div>
                                <label class="block text-sm text-slate-600 mb-1.5">Re-engagement Text</label>
                                <textarea id="reengagementText" rows="2" placeholder="e.g., I'm still here. Is there anything else I can help you with?" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm resize-none"></textarea>
                                <p class="text-xs text-slate-400 mt-1">Message played when the customer has been silent for too long</p>
                            </div>
                        </div>

                        <!-- Interruption Settings -->
                        <div class="config-section">
                            <h3 class="text-sm font-semibold text-slate-700 mb-4">Interruption Settings</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">Min Interruption Words</label>
                                    <input type="number" value="2" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                    <p class="text-xs text-slate-400 mt-1">Minimum words to detect as interruption</p>
                                </div>
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">Min Interruption Duration (ms)</label>
                                    <input type="number" value="500" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                    <p class="text-xs text-slate-400 mt-1">Minimum duration to trigger interruption</p>
                                </div>
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">False Interruption Timeout (ms)</label>
                                    <input type="number" value="1000" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                    <p class="text-xs text-slate-400 mt-1">Wait time before resuming after false interrupt</p>
                                </div>
                                <div class="flex items-center">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                                        <span class="text-sm text-slate-600">Resume after false interruptions</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Call Settings -->
                        <div class="config-section">
                            <h3 class="text-sm font-semibold text-slate-700 mb-4">Call Settings</h3>
                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">Max Call Duration (sec)</label>
                                    <input type="number" value="600" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">Re-engagement Timeout (sec)</label>
                                    <input type="number" value="30" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm text-slate-600 mb-1.5">Retry Attempts</label>
                                    <input type="number" value="3" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm">
                                </div>
                            </div>
                        </div>

                        <!-- Additional Options -->
                        <div class="config-section">
                            <h3 class="text-sm font-semibold text-slate-700 mb-4">Additional Options</h3>
                            <div class="space-y-3">
                                <label class="flex items-center justify-between cursor-pointer p-3 bg-slate-50 rounded-lg">
                                    <div>
                                        <span class="text-sm font-medium text-slate-700">Noise Cancellation</span>
                                        <p class="text-xs text-slate-500">Apply noise reduction to audio</p>
                                    </div>
                                    <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                                </label>
                                <label class="flex items-center justify-between cursor-pointer p-3 bg-slate-50 rounded-lg">
                                    <div>
                                        <span class="text-sm font-medium text-slate-700">Call Recording</span>
                                        <p class="text-xs text-slate-500">Record calls for review and training</p>
                                    </div>
                                    <input type="checkbox" class="w-4 h-4 text-accent-600 rounded">
                                </label>
                                <label class="flex items-center justify-between cursor-pointer p-3 bg-slate-50 rounded-lg">
                                    <div>
                                        <span class="text-sm font-medium text-slate-700">Transcription</span>
                                        <p class="text-xs text-slate-500">Generate text transcript of calls</p>
                                    </div>
                                    <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer -->
            <div class="flex items-center justify-between p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#assistantModal').fadeOut()" class="text-slate-600 px-4 py-2 text-sm font-medium hover:text-slate-800">Cancel</button>
                <div class="flex items-center gap-2">
                    <button id="prevBtn" onclick="prevStep()" class="bg-white border border-slate-200 text-slate-600 px-4 py-2 rounded-lg text-sm font-medium hover:bg-slate-50 disabled:opacity-50" disabled>Previous</button>
                    <button id="nextBtn" onclick="nextStep()" class="bg-accent-500 hover:bg-accent-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition">Next</button>
                    <button id="saveBtn" onclick="saveAssistant()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition hidden">Save Assistant</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Campaign Modal -->
<div id="campaignModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Create Campaign</h2>
                    <p class="text-sm text-slate-500">Configure outbound calling campaign</p>
                </div>
                <button onclick="$('#campaignModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-140px)]">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Campaign Name *</label>
                    <input type="text" id="campaignName" placeholder="e.g., Q1 Debt Recovery" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Select Assistant *</label>
                    <select id="campaignAssistant" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                        <option value="">Choose an assistant...</option>
                        <option value="debt">Debt Collection</option>
                        <option value="sales">Sales Outreach</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Start Date</label>
                        <input type="date" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">End Date</label>
                        <input type="date" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                    </div>
                </div>
                <div class="border-t border-slate-200 pt-5">
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Schedule Settings</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-slate-600 mb-1.5">Active Days</label>
                            <div class="flex flex-wrap gap-1">
                                <label class="flex items-center gap-1 px-2 py-1 bg-accent-50 border border-accent-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" checked class="hidden"> Mon
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-accent-50 border border-accent-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" checked class="hidden"> Tue
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-accent-50 border border-accent-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" checked class="hidden"> Wed
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-accent-50 border border-accent-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" checked class="hidden"> Thu
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-accent-50 border border-accent-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" checked class="hidden"> Fri
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" class="hidden"> Sat
                                </label>
                                <label class="flex items-center gap-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-xs cursor-pointer">
                                    <input type="checkbox" class="hidden"> Sun
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-600 mb-1.5">Active Hours</label>
                            <div class="flex items-center gap-2">
                                <input type="time" value="09:00" class="flex-1 bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                <span class="text-slate-400">to</span>
                                <input type="time" value="18:00" class="flex-1 bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="border-t border-slate-200 pt-5">
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Retry Logic</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-slate-600 mb-1.5">Max Retries</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option>1 attempt</option>
                                <option selected>2 attempts</option>
                                <option>3 attempts</option>
                                <option>5 attempts</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-600 mb-1.5">Retry Interval</label>
                            <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                                <option>30 minutes</option>
                                <option>1 hour</option>
                                <option selected>2 hours</option>
                                <option>4 hours</option>
                                <option>24 hours</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="border-t border-slate-200 pt-5">
                    <h3 class="text-sm font-semibold text-slate-700 mb-3">Upload Leads</h3>
                    <div class="border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-accent-300 cursor-pointer transition">
                        <i class="fas fa-cloud-upload-alt text-3xl text-slate-400 mb-2"></i>
                        <p class="text-sm text-slate-600 font-medium">Click to upload or drag and drop</p>
                        <p class="text-xs text-slate-400 mt-1">CSV or Excel files supported</p>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#campaignModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="saveCampaign()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Create Campaign</button>
            </div>
        </div>
    </div>
</div>

<!-- Knowledge Base Modal -->
<div id="kbModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Create Knowledge Base</h2>
                    <p class="text-sm text-slate-500">Index documents and URLs for AI reference</p>
                </div>
                <button onclick="$('#kbModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-140px)]">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Knowledge Base Name *</label>
                    <input type="text" placeholder="e.g., Product Documentation" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Description</label>
                    <textarea rows="2" placeholder="Describe what this knowledge base contains..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Upload Documents</label>
                    <div class="border-2 border-dashed border-slate-300 rounded-lg p-5 text-center hover:border-accent-300 cursor-pointer transition">
                        <i class="fas fa-file-upload text-2xl text-slate-400 mb-2"></i>
                        <p class="text-sm text-slate-600 font-medium">Click to upload documents</p>
                        <p class="text-xs text-slate-400 mt-1">PDF, DOCX, TXT, MD supported</p>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Add URLs</label>
                    <textarea rows="3" placeholder="Enter URLs to index, one per line&#10;https://example.com/faq&#10;https://example.com/docs" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm font-mono focus:ring-2 focus:ring-accent-500 focus:outline-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Retrieval Mode</label>
                    <div class="grid grid-cols-2 gap-3">
                        <label class="flex items-start gap-3 p-3 bg-accent-50 border-2 border-accent-200 rounded-lg cursor-pointer">
                            <input type="radio" name="kbMode" checked class="mt-0.5">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Function Call</span>
                                <p class="text-xs text-slate-500">AI explicitly calls KB when needed</p>
                            </div>
                        </label>
                        <label class="flex items-start gap-3 p-3 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer">
                            <input type="radio" name="kbMode" class="mt-0.5">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Prompt Injection</span>
                                <p class="text-xs text-slate-500">KB content injected into system prompt</p>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#kbModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="saveKB()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Create Knowledge Base</button>
            </div>
        </div>
    </div>
</div>

<!-- WhatsApp Sender Modal -->
<div id="waSenderModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Add WhatsApp Sender</h2>
                    <p class="text-sm text-slate-500">Configure WhatsApp Business number</p>
                </div>
                <button onclick="$('#waSenderModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Phone Number *</label>
                    <input type="tel" placeholder="+40 7XX XXX XXX" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Display Name *</label>
                    <input type="text" placeholder="e.g., Telerenta Support" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Type *</label>
                    <div class="grid grid-cols-2 gap-3">
                        <label class="flex items-center gap-3 p-3 bg-accent-50 border-2 border-accent-200 rounded-lg cursor-pointer">
                            <input type="radio" name="waType" checked>
                            <div>
                                <span class="text-sm font-medium text-slate-700">Platform</span>
                                <p class="text-xs text-slate-500">Managed by Aloro</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer">
                            <input type="radio" name="waType">
                            <div>
                                <span class="text-sm font-medium text-slate-700">External</span>
                                <p class="text-xs text-slate-500">Your own API</p>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                    <p class="text-xs text-amber-700"><i class="fas fa-info-circle mr-1"></i> After adding, you'll need to verify this number via SMS or voice call to activate it for WhatsApp Business.</p>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#waSenderModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="saveWASender()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Add Sender</button>
            </div>
        </div>
    </div>
</div>

<!-- WhatsApp Template Modal -->
<div id="waTemplateModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Create WhatsApp Template</h2>
                    <p class="text-sm text-slate-500">Template for business-initiated messages</p>
                </div>
                <button onclick="$('#waTemplateModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5 overflow-y-auto max-h-[calc(90vh-140px)]">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Template Name *</label>
                        <input type="text" placeholder="e.g., payment_reminder" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm font-mono">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Category *</label>
                        <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                            <option>Utility</option>
                            <option>Marketing</option>
                            <option>Authentication</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Language *</label>
                        <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                            <option>Romanian (ro)</option>
                            <option>English (en)</option>
                            <option>German (de)</option>
                            <option>French (fr)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1.5">Header Type</label>
                        <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                            <option>None</option>
                            <option>Text</option>
                            <option>Image</option>
                            <option>Video</option>
                            <option>Document</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Body *</label>
                    <textarea rows="4" placeholder="Hello {{1}},&#10;&#10;This is a reminder about your payment of {{2}} due on {{3}}.&#10;&#10;Thank you!" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none"></textarea>
                    <p class="text-xs text-slate-400 mt-1">Use {{1}}, {{2}}, etc. for variable placeholders</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Footer</label>
                    <input type="text" placeholder="e.g., Reply STOP to unsubscribe" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Buttons (Optional)</label>
                    <div class="space-y-2">
                        <div class="flex items-center gap-2">
                            <select class="bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                                <option>Quick Reply</option>
                                <option>URL</option>
                                <option>Call</option>
                            </select>
                            <input type="text" placeholder="Button text" class="flex-1 bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm">
                            <button class="text-slate-400 hover:text-red-500"><i class="fas fa-trash text-sm"></i></button>
                        </div>
                        <button class="text-accent-600 text-sm font-medium hover:underline"><i class="fas fa-plus mr-1"></i>Add Button</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#waTemplateModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="saveWATemplate()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Submit for Approval</button>
            </div>
        </div>
    </div>
</div>

<!-- Phone Number Modal -->
<div id="phoneModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Add Phone Number</h2>
                    <p class="text-sm text-slate-500">Configure phone number for voice calls</p>
                </div>
                <button onclick="$('#phoneModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Number Type *</label>
                    <div class="space-y-2">
                        <label class="flex items-start gap-3 p-3 bg-accent-50 border-2 border-accent-200 rounded-lg cursor-pointer">
                            <input type="radio" name="phoneType" checked class="mt-0.5">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Dedicated Number</span>
                                <p class="text-xs text-slate-500">Full inbound + outbound · From $3.99/mo</p>
                            </div>
                        </label>
                        <label class="flex items-start gap-3 p-3 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer">
                            <input type="radio" name="phoneType" class="mt-0.5">
                            <div>
                                <span class="text-sm font-medium text-slate-700">SIP Integration</span>
                                <p class="text-xs text-slate-500">Use your PBX/VOIP · $0.00045/min bridging</p>
                            </div>
                        </label>
                        <label class="flex items-start gap-3 p-3 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer">
                            <input type="radio" name="phoneType" class="mt-0.5">
                            <div>
                                <span class="text-sm font-medium text-slate-700">Caller ID</span>
                                <p class="text-xs text-slate-500">Outbound only with your existing number</p>
                            </div>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Phone Number / SIP URI *</label>
                    <input type="text" placeholder="+40 7XX XXX XXX or sip://pbx.example.com" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Assign to Assistant</label>
                    <select class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm">
                        <option value="">Select an assistant...</option>
                        <option value="debt">Debt Collection</option>
                        <option value="sales">Sales Outreach</option>
                    </select>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <p class="text-xs text-blue-700"><i class="fas fa-info-circle mr-1"></i> For Caller ID numbers, you'll need to verify ownership via a code sent to the number.</p>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#phoneModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="savePhone()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Add Number</button>
            </div>
        </div>
    </div>
</div>

<!-- Webhook Modal -->
<div id="webhookModal" class="fixed inset-0 bg-black/40 z-50 hidden">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-hidden shadow-xl">
            <div class="flex items-center justify-between p-5 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-semibold text-slate-800">Add Post-Call Webhook</h2>
                    <p class="text-sm text-slate-500">Receive call data via HTTP POST</p>
                </div>
                <button onclick="$('#webhookModal').fadeOut()" class="text-slate-400 hover:text-slate-600 text-xl">&times;</button>
            </div>
            <div class="p-6 space-y-5">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Webhook Name *</label>
                    <input type="text" placeholder="e.g., CRM Integration" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">URL *</label>
                    <input type="url" placeholder="https://your-server.com/webhook" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2.5 text-sm font-mono focus:ring-2 focus:ring-accent-500 focus:outline-none">
                </div>
                <div class="space-y-3">
                    <label class="flex items-center justify-between cursor-pointer p-3 bg-slate-50 rounded-lg">
                        <div>
                            <span class="text-sm font-medium text-slate-700">Completed calls only</span>
                            <p class="text-xs text-slate-500">Only trigger for successfully connected calls</p>
                        </div>
                        <input type="checkbox" checked class="w-4 h-4 text-accent-600 rounded">
                    </label>
                    <label class="flex items-center justify-between cursor-pointer p-3 bg-slate-50 rounded-lg">
                        <div>
                            <span class="text-sm font-medium text-slate-700">Include recording</span>
                            <p class="text-xs text-slate-500">Add recording URL to payload</p>
                        </div>
                        <input type="checkbox" class="w-4 h-4 text-accent-600 rounded">
                    </label>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1.5">Variables to Include</label>
                    <div class="grid grid-cols-2 gap-2">
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> call_id
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> phone
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> assistant_id
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> duration
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> variables
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600">
                            <input type="checkbox" checked class="rounded text-accent-500"> transcript
                        </label>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 p-5 border-t border-slate-200 bg-slate-50">
                <button onclick="$('#webhookModal').fadeOut()" class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800">Cancel</button>
                <button onclick="saveWebhook()" class="bg-accent-500 hover:bg-accent-600 text-white px-5 py-2 rounded-lg text-sm font-medium transition">Add Webhook</button>
            </div>
        </div>
    </div>
</div>

    <script src="js/app.js"></script>
</body>
</html>
